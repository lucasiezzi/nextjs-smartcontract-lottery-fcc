(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{27750:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PhantomAdapter:function(){return PhantomAdapter}});var _ref,_ref2,_ref21,_ref22,_ref23,asyncToGenerator=__webpack_require__(15861),classCallCheck=__webpack_require__(15671),createClass=__webpack_require__(43144),assertThisInitialized=__webpack_require__(97326),get=__webpack_require__(73237),inherits=__webpack_require__(60136),possibleConstructorReturn=__webpack_require__(82963),getPrototypeOf=__webpack_require__(61120),defineProperty=__webpack_require__(4942),regenerator=__webpack_require__(64687),regenerator_default=__webpack_require__.n(regenerator),openloginJrpc_esm=__webpack_require__(64049),custom_error=__webpack_require__(13631),httpHelpers_esm=__webpack_require__(20917),jwt_decode_esm=__webpack_require__(96245),loglevel=__webpack_require__(2043),loglevel_default=__webpack_require__.n(loglevel),CHAIN_NAMESPACES={EIP155:"eip155",SOLANA:"solana",OTHER:"other"},ADAPTER_NAMESPACES={EIP155:"eip155",SOLANA:"solana",MULTICHAIN:"multichain"},getDefaultNetworkId=function(chainNamespace){if(chainNamespace===CHAIN_NAMESPACES.EIP155||chainNamespace===CHAIN_NAMESPACES.SOLANA)return 1;throw Error("Chain namespace ".concat(chainNamespace," is not supported"))},getEvmChainConfig=function(chainId){var chainNamespace=CHAIN_NAMESPACES.EIP155;return 1===chainId?{chainNamespace:chainNamespace,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===chainId?{chainNamespace:chainNamespace,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===chainId?{chainNamespace:chainNamespace,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===chainId?{chainNamespace:chainNamespace,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===chainId?{chainNamespace:chainNamespace,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===chainId?{chainNamespace:chainNamespace,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon"}:56===chainId?{chainNamespace:chainNamespace,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:97===chainId?{chainNamespace:chainNamespace,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:25===chainId?{chainNamespace:chainNamespace,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===chainId?{chainNamespace:chainNamespace,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:8217===chainId?{chainNamespace:chainNamespace,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn"}:null},getSolanaChainConfig=function(chainId){var chainNamespace=CHAIN_NAMESPACES.SOLANA;return 1===chainId?{chainNamespace:chainNamespace,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}:2===chainId?{chainNamespace:chainNamespace,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana"}:3===chainId?{chainNamespace:chainNamespace,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana"}:null},getChainConfig=function(chainNamespace,chainId){if(chainNamespace===CHAIN_NAMESPACES.OTHER)return null;var finalChainId=chainId?"number"==typeof chainId?chainId:parseInt(chainId,16):getDefaultNetworkId(chainNamespace);return chainNamespace===CHAIN_NAMESPACES.EIP155?getEvmChainConfig(finalChainId):chainNamespace===CHAIN_NAMESPACES.SOLANA?getSolanaChainConfig(finalChainId):null};function _createSuper$1(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var result,Super=(0,getPrototypeOf.Z)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)}}var Web3AuthError=function(_CustomError){(0,inherits.Z)(Web3AuthError,_CustomError);var _super=_createSuper$1(Web3AuthError);function Web3AuthError(code,message){var _this;return(0,classCallCheck.Z)(this,Web3AuthError),_this=_super.call(this,message),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"code",void 0),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"message",void 0),_this.code=code,_this.message=message||"",Object.defineProperty((0,assertThisInitialized.Z)(_this),"name",{value:"Web3AuthError"}),_this}return(0,createClass.Z)(Web3AuthError,[{key:"toJSON",value:function(){return{name:this.name,code:this.code,message:this.message}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),Web3AuthError}(custom_error.s),WalletInitializationError=function(_Web3AuthError){(0,inherits.Z)(WalletInitializationError,_Web3AuthError);var _super2=_createSuper$1(WalletInitializationError);function WalletInitializationError(code,message){var _this2;return(0,classCallCheck.Z)(this,WalletInitializationError),_this2=_super2.call(this,code,message),Object.defineProperty((0,assertThisInitialized.Z)(_this2),"name",{value:"WalletInitializationError"}),_this2}return(0,createClass.Z)(WalletInitializationError,null,[{key:"fromCode",value:function(code){var extraMessage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new WalletInitializationError(code,"".concat(WalletInitializationError.messages[code],", ").concat(extraMessage))}},{key:"notFound",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5001,extraMessage)}},{key:"notInstalled",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5002,extraMessage)}},{key:"notReady",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5003,extraMessage)}},{key:"windowBlocked",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5004,extraMessage)}},{key:"windowClosed",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5005,extraMessage)}},{key:"incompatibleChainNameSpace",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5006,extraMessage)}},{key:"duplicateAdapterError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5007,extraMessage)}},{key:"invalidProviderConfigError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5008,extraMessage)}},{key:"providerNotReadyError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5009,extraMessage)}},{key:"rpcConnectionError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5010,extraMessage)}},{key:"invalidParams",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5011,extraMessage)}},{key:"invalidNetwork",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5013,extraMessage)}}]),WalletInitializationError}(Web3AuthError);(0,defineProperty.Z)(WalletInitializationError,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});var WalletLoginError=function(_Web3AuthError2){(0,inherits.Z)(WalletLoginError,_Web3AuthError2);var _super3=_createSuper$1(WalletLoginError);function WalletLoginError(code,message){var _this3;return(0,classCallCheck.Z)(this,WalletLoginError),_this3=_super3.call(this,code,message),Object.defineProperty((0,assertThisInitialized.Z)(_this3),"name",{value:"WalletLoginError"}),_this3}return(0,createClass.Z)(WalletLoginError,null,[{key:"fromCode",value:function(code){var extraMessage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new WalletLoginError(code,"".concat(WalletLoginError.messages[code]).concat(extraMessage))}},{key:"connectionError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletLoginError.fromCode(5111,extraMessage)}},{key:"disconnectionError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletLoginError.fromCode(5112,extraMessage)}},{key:"notConnectedError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletLoginError.fromCode(5113,extraMessage)}},{key:"popupClosed",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletLoginError.fromCode(5114,extraMessage)}}]),WalletLoginError}(Web3AuthError);function ownKeys$1(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread$1(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys$1(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys$1(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}(0,defineProperty.Z)(WalletLoginError,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});var MULTI_CHAIN_ADAPTERS={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},SOLANA_ADAPTERS=_objectSpread$1({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLLET:"sollet",SOLLET_EXTENSION:"sollet-extension",SOLFLARE:"solflare",SLOPE:"slope"},MULTI_CHAIN_ADAPTERS),EVM_ADAPTERS=_objectSpread$1({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},MULTI_CHAIN_ADAPTERS),WALLET_ADAPTERS=_objectSpread$1(_objectSpread$1({},EVM_ADAPTERS),SOLANA_ADAPTERS);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}var ADAPTER_CATEGORY={EXTERNAL:"external",IN_APP:"in_app"},ADAPTER_STATUS={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},ADAPTER_EVENTS=_objectSpread(_objectSpread({},ADAPTER_STATUS),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"}),BaseAdapter=function(_SafeEventEmitter){(0,inherits.Z)(BaseAdapter,_SafeEventEmitter);var hasNativeReflectConstruct,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(BaseAdapter);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function BaseAdapter(){var _this;(0,classCallCheck.Z)(this,BaseAdapter);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"adapterData",{}),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"sessionTime",86400),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"chainConfig",null),_this}return(0,createClass.Z)(BaseAdapter,[{key:"chainConfigProxy",get:function(){return this.chainConfig?_objectSpread({},this.chainConfig):null}},{key:"setChainConfig",value:function(customChainConfig){if(this.status!==ADAPTER_STATUS.READY){if(!customChainConfig.chainNamespace)throw WalletInitializationError.notReady("ChainNamespace is required while setting chainConfig");var defaultChainConfig=getChainConfig(customChainConfig.chainNamespace,customChainConfig.chainId);this.chainConfig=_objectSpread(_objectSpread({},defaultChainConfig),customChainConfig)}}},{key:"setAdapterSettings",value:function(_){}},{key:"checkConnectionRequirements",value:function(){if(this.name!==WALLET_ADAPTERS.WALLET_CONNECT_V1||this.status!==ADAPTER_STATUS.CONNECTING){if(this.status===ADAPTER_STATUS.CONNECTING)throw WalletInitializationError.notReady("Already connecting");if(this.status===ADAPTER_STATUS.CONNECTED)throw WalletLoginError.connectionError("Already connected");if(this.status!==ADAPTER_STATUS.READY)throw WalletLoginError.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function");if(!this.clientId)throw WalletLoginError.connectionError("Please initialize Web3Auth with a valid clientId in constructor")}}},{key:"checkInitializationRequirements",value:function(){if(this.status!==ADAPTER_STATUS.NOT_READY){if(this.status===ADAPTER_STATUS.CONNECTED)throw WalletInitializationError.notReady("Already connected");if(this.status===ADAPTER_STATUS.READY)throw WalletInitializationError.notReady("Adapter is already initialized")}}},{key:"updateAdapterData",value:function(data){this.adapterData=data,this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:data})}}]),BaseAdapter}(openloginJrpc_esm.Ue),authServer="https://authjs.web3auth.io",log=loglevel_default().getLogger("web3auth-logger");function storageAvailable(type){var storage,storageExists=!1,storageLength=0;try{storage=window[type],storageExists=!0,storageLength=storage.length;var x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),!0}catch(error){return!!(error&&(22===error.code||1014===error.code||"QuotaExceededError"===error.name||"NS_ERROR_DOM_QUOTA_REACHED"===error.name)&&storageExists&&0!==storageLength)}}var checkIfTokenIsExpired=function(token){var decoded=(0,jwt_decode_esm.Z)(token);return!!(!decoded.exp||decoded.exp<Math.floor(Date.now()/1e3))},signChallenge=(_ref=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(payload,chainNamespace){var data,res;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return data={payload:payload,header:{t:"solana"===chainNamespace?"sip99":"eip191"},network:"solana"===chainNamespace?"solana":"ethereum"},_context.next=6,(0,httpHelpers_esm.v_)("".concat(authServer,"/siww/get"),data);case 6:if((res=_context.sent).success){_context.next=9;break}throw Error("Failed to authenticate user, Please reach out to Web3Auth Support team");case 9:return _context.abrupt("return",res.challenge);case 10:case"end":return _context.stop()}},_callee)})),function(_x,_x2){return _ref.apply(this,arguments)}),verifySignedChallenge=(_ref2=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(chainNamespace,signedMessage,challenge,issuer,sessionTime,clientId){var sigData,idTokenRes;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return sigData={signature:{s:signedMessage,t:"solana"===chainNamespace?"sip99":"eip191"},message:challenge,issuer:issuer,audience:window.location.hostname,timeout:sessionTime},_context2.next=4,(0,httpHelpers_esm.v_)("".concat(authServer,"/siww/verify"),sigData,{headers:{client_id:clientId,wallet_provider:issuer}});case 4:if((idTokenRes=_context2.sent).success){_context2.next=8;break}throw log.error("Failed to authenticate user, ,message verification failed",idTokenRes.error),Error("Failed to authenticate user, ,message verification failed");case 8:return _context2.abrupt("return",idTokenRes.token);case 9:case"end":return _context2.stop()}},_callee2)})),function(_x3,_x4,_x5,_x6,_x7,_x8){return _ref2.apply(this,arguments)}),node_modules_bs58=__webpack_require__(9193),bs58_default=__webpack_require__.n(node_modules_bs58),BaseSolanaAdapter=function(_BaseAdapter){(0,inherits.Z)(BaseSolanaAdapter,_BaseAdapter);var hasNativeReflectConstruct,_authenticateUser,_disconnect,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(BaseSolanaAdapter);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function BaseSolanaAdapter(){var _this,params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,classCallCheck.Z)(this,BaseSolanaAdapter),_this=_super.call(this),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"clientId",void 0),_this.clientId=params.clientId,_this}return(0,createClass.Z)(BaseSolanaAdapter,[{key:"authenticateUser",value:(_authenticateUser=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(){var _this$chainConfig,_this$chainConfig2,chainNamespace,chainId,accounts,existingToken,payload,challenge,encodedMessage,signedMessage,idToken;return regenerator_default().wrap(function(_context){for(var userAddress,issuer,userAddress1,issuer1;;)switch(_context.prev=_context.next){case 0:if(!(!this.provider||!(null!==(_this$chainConfig=this.chainConfig)&&void 0!==_this$chainConfig&&_this$chainConfig.chainId))){_context.next=2;break}throw WalletLoginError.notConnectedError();case 2:if(chainNamespace=(_this$chainConfig2=this.chainConfig).chainNamespace,chainId=_this$chainConfig2.chainId,!(this.status!==ADAPTER_STATUS.CONNECTED)){_context.next=5;break}throw WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first");case 5:return _context.next=7,this.provider.request({method:"getAccounts"});case 7:if(!((accounts=_context.sent)&&accounts.length>0)){_context.next=27;break}if(userAddress=accounts[0],issuer=this.name,!(existingToken=storageAvailable("localStorage")?localStorage.getItem("".concat(userAddress.toLowerCase(),"_").concat(issuer)):null)||checkIfTokenIsExpired(existingToken)){_context.next=14;break}return _context.abrupt("return",{idToken:existingToken});case 14:return payload={domain:window.location.origin,uri:window.location.href,address:accounts[0],chainId:parseInt(chainId,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},_context.next=17,signChallenge(payload,chainNamespace);case 17:return challenge=_context.sent,encodedMessage=new TextEncoder().encode(challenge),_context.next=21,this.provider.request({method:"signMessage",params:{message:encodedMessage,display:"utf8"}});case 21:return signedMessage=_context.sent,_context.next=24,verifySignedChallenge(chainNamespace,bs58_default().encode(signedMessage),challenge,this.name,this.sessionTime,this.clientId);case 24:return idToken=_context.sent,userAddress1=accounts[0],issuer1=this.name,storageAvailable("localStorage")&&localStorage.setItem("".concat(userAddress1.toLowerCase(),"_").concat(issuer1),idToken),_context.abrupt("return",{idToken:idToken});case 27:throw WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first");case 28:case"end":return _context.stop()}},_callee,this)})),function(){return _authenticateUser.apply(this,arguments)})},{key:"disconnect",value:(_disconnect=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(){var accounts;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(this.status!==ADAPTER_STATUS.CONNECTED)){_context2.next=2;break}throw WalletLoginError.disconnectionError("Not connected with wallet");case 2:return _context2.next=4,this.provider.request({method:"getAccounts"});case 4:if((accounts=_context2.sent)&&accounts.length>0){var userAddress,issuer;userAddress=accounts[0],issuer=this.name,storageAvailable("localStorage")&&localStorage.removeItem("".concat(userAddress.toLowerCase(),"_").concat(issuer))}case 6:case"end":return _context2.stop()}},_callee2,this)})),function(){return _disconnect.apply(this,arguments)})}]),BaseSolanaAdapter}(BaseAdapter),baseControllers_esm=__webpack_require__(22782),dist=__webpack_require__(79826),json_rpc_random_id=__webpack_require__(23420),json_rpc_random_id_default=__webpack_require__.n(json_rpc_random_id);function baseProvider_esm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function baseProvider_esm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?baseProvider_esm_ownKeys(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):baseProvider_esm_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}var BaseProvider=function(_BaseController){(0,inherits.Z)(BaseProvider,_BaseController);var hasNativeReflectConstruct,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(BaseProvider);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function BaseProvider(_ref){var _thisSuper,_this,config=_ref.config,state=_ref.state;if((0,classCallCheck.Z)(this,BaseProvider),_this=_super.call(this,{config:config,state:state}),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"_providerEngineProxy",null),!config.chainConfig)throw WalletInitializationError.invalidProviderConfigError("Please provide chainConfig");if(!config.chainConfig.chainId)throw WalletInitializationError.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!config.chainConfig.rpcTarget)throw WalletInitializationError.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");return _this.defaultState={chainId:"loading"},_this.defaultConfig={chainConfig:config.chainConfig,networks:(0,defineProperty.Z)({},config.chainConfig.chainId,config.chainConfig)},(0,get.Z)((_thisSuper=(0,assertThisInitialized.Z)(_this),(0,getPrototypeOf.Z)(BaseProvider.prototype)),"initialize",_thisSuper).call(_thisSuper),_this}return(0,createClass.Z)(BaseProvider,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(_){throw Error("Method not implemented.")}},{key:"addChain",value:function(chainConfig){if(!chainConfig.chainId||!chainConfig.rpcTarget)throw dist.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:baseProvider_esm_objectSpread(baseProvider_esm_objectSpread({},this.config.networks),{},(0,defineProperty.Z)({},chainConfig.chainId,chainConfig))})}},{key:"getChainConfig",value:function(chainId){var _this$config$networks,chainConfig=null===(_this$config$networks=this.config.networks)||void 0===_this$config$networks?void 0:_this$config$networks[chainId];if(!chainConfig)throw dist.ethErrors.rpc.invalidRequest("Chain ".concat(chainId," is not supported, please add chainConfig for it"));return chainConfig}},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(providerEngineProxy){this._providerEngineProxy?this._providerEngineProxy.setTarget(providerEngineProxy):this._providerEngineProxy=(0,baseControllers_esm.qY)(providerEngineProxy)}}]),BaseProvider}(baseControllers_esm.xG),CommonPrivateKeyProvider=function(){var _setupProvider,_switchChain;function CommonPrivateKeyProvider(){(0,classCallCheck.Z)(this,CommonPrivateKeyProvider),(0,defineProperty.Z)(this,"_providerEngineProxy",null)}return(0,createClass.Z)(CommonPrivateKeyProvider,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(_){throw Error("Method not implemented.")}},{key:"addChain",value:function(_){throw Error("Method not implemented.")}},{key:"setupProvider",value:(_setupProvider=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(privKey){var privKeyMiddleware,engine,provider;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:privKeyMiddleware=this.getPrivKeyMiddleware(privKey),(engine=new openloginJrpc_esm.eI).push(privKeyMiddleware),provider=(0,baseControllers_esm.Xj)(engine),this.updateProviderEngineProxy(provider);case 5:case"end":return _context.stop()}},_callee,this)})),function(_x){return _setupProvider.apply(this,arguments)})},{key:"switchChain",value:(_switchChain=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(_){return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",Promise.resolve());case 1:case"end":return _context2.stop()}},_callee2)})),function(_x2){return _switchChain.apply(this,arguments)})},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(providerEngineProxy){this._providerEngineProxy?this._providerEngineProxy.setTarget(providerEngineProxy):this._providerEngineProxy=(0,baseControllers_esm.qY)(providerEngineProxy)}},{key:"getPrivKeyMiddleware",value:function(privKey){var _getPrivatekey,middleware={getPrivatekey:(_getPrivatekey=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(){return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",privKey);case 1:case"end":return _context3.stop()}},_callee3)})),function(){return _getPrivatekey.apply(this,arguments)})};return this.createPrivKeyMiddleware(middleware)}},{key:"createPrivKeyMiddleware",value:function(_ref){var getPrivatekey=_ref.getPrivatekey;function _getPrivatekeyHandler(){return(_getPrivatekeyHandler=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee4(_,res){return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,getPrivatekey();case 2:res.result=_context4.sent;case 3:case"end":return _context4.stop()}},_callee4)}))).apply(this,arguments)}return(0,openloginJrpc_esm.v0)({private_key:(0,openloginJrpc_esm.Pk)(function(_x3,_x4){return _getPrivatekeyHandler.apply(this,arguments)})})}}]),CommonPrivateKeyProvider}();(0,defineProperty.Z)(CommonPrivateKeyProvider,"getProviderInstance",(_ref21=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee5(params){var providerFactory;return regenerator_default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return providerFactory=new CommonPrivateKeyProvider,_context5.next=3,providerFactory.setupProvider(params.privKey);case 3:return _context5.abrupt("return",providerFactory);case 4:case"end":return _context5.stop()}},_callee5)})),function(_x5){return _ref21.apply(this,arguments)})),json_rpc_random_id_default()();var node_modules_bs58_0=__webpack_require__(77191),node_modules_bs58_default=__webpack_require__.n(node_modules_bs58_0),index_browser_esm=__webpack_require__(59917),nacl_fast=__webpack_require__(50108),nacl_fast_default=__webpack_require__.n(nacl_fast),Buffer=__webpack_require__(48764).Buffer;function createConfigMiddleware(providerConfig){var chainId=providerConfig.chainId;return(0,openloginJrpc_esm.UZ)([function(req,res,next,end){return"solana_chainId"===req.method?(res.result=chainId,end()):next()},function(req,res,next,end){return"solana_provider_config"===req.method?(res.result=providerConfig,end()):next()}])}function createGenericJRPCMiddleware(targetMethod,handler){var _ref5;return(0,openloginJrpc_esm.Pk)((_ref5=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(request,response,next){var result;return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!(request.method!==targetMethod)){_context3.next=3;break}return _context3.abrupt("return",next());case 3:if(handler){_context3.next=5;break}throw Error("WalletMiddleware - ".concat(targetMethod," not provided"));case 5:return _context3.next=7,handler(request);case 7:return result=_context3.sent,response.result=result,_context3.abrupt("return",void 0);case 10:case"end":return _context3.stop()}},_callee3)})),function(_x7,_x8,_x9){return _ref5.apply(this,arguments)}))}function createSolanaMiddleware(providerHandlers){var _ref4,_ref2,getAccounts=providerHandlers.getAccounts,requestAccounts=providerHandlers.requestAccounts,signTransaction=providerHandlers.signTransaction,signAndSendTransaction=providerHandlers.signAndSendTransaction,signAllTransactions=providerHandlers.signAllTransactions,signMessage=providerHandlers.signMessage,getPrivateKey=providerHandlers.getPrivateKey,getSecretKey=providerHandlers.getSecretKey;return(0,openloginJrpc_esm.UZ)([(0,openloginJrpc_esm.Pk)((_ref4=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(request,response,next){var accounts;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!("requestAccounts"!==request.method)){_context2.next=3;break}return _context2.abrupt("return",next());case 3:if(requestAccounts){_context2.next=5;break}throw Error("WalletMiddleware - opts.requestAccounts not provided");case 5:return _context2.next=7,requestAccounts(request);case 7:return accounts=_context2.sent,response.result=accounts,_context2.abrupt("return",void 0);case 10:case"end":return _context2.stop()}},_callee2)})),function(_x4,_x5,_x6){return _ref4.apply(this,arguments)})),(0,openloginJrpc_esm.Pk)((_ref2=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(request,response,next){var accounts;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!("getAccounts"!==request.method)){_context.next=3;break}return _context.abrupt("return",next());case 3:if(getAccounts){_context.next=5;break}throw Error("WalletMiddleware - opts.getAccounts not provided");case 5:return _context.next=7,getAccounts(request);case 7:return accounts=_context.sent,response.result=accounts,_context.abrupt("return",void 0);case 10:case"end":return _context.stop()}},_callee)})),function(_x,_x2,_x3){return _ref2.apply(this,arguments)})),createGenericJRPCMiddleware("signTransaction",signTransaction),createGenericJRPCMiddleware("signAndSendTransaction",signAndSendTransaction),createGenericJRPCMiddleware("signAllTransactions",signAllTransactions),createGenericJRPCMiddleware("signMessage",signMessage),createGenericJRPCMiddleware("solanaPrivateKey",getPrivateKey),createGenericJRPCMiddleware("solanaSecretKey",getSecretKey)])}function ownKeys$3(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread$3(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys$3(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys$3(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}var BaseInjectedProvider=function(_BaseProvider){(0,inherits.Z)(BaseInjectedProvider,_BaseProvider);var hasNativeReflectConstruct,_switchChain,_setupProvider,_lookupNetwork,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(BaseInjectedProvider);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function BaseInjectedProvider(_ref){var config=_ref.config,state=_ref.state;return(0,classCallCheck.Z)(this,BaseInjectedProvider),_super.call(this,{config:{chainConfig:_objectSpread$3(_objectSpread$3({},config.chainConfig),{},{chainNamespace:CHAIN_NAMESPACES.SOLANA})},state:state})}return(0,createClass.Z)(BaseInjectedProvider,[{key:"switchChain",value:(_switchChain=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(_){return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",Promise.resolve());case 1:case"end":return _context.stop()}},_callee)})),function(_x){return _switchChain.apply(this,arguments)})},{key:"setupProvider",value:(_setupProvider=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(injectedProvider){var engine,solanaMiddleware,configMiddleware,injectedProviderProxy,provider;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return engine=new openloginJrpc_esm.eI,solanaMiddleware=createSolanaMiddleware(this.getProviderHandlers(injectedProvider)),engine.push(solanaMiddleware),configMiddleware=createConfigMiddleware(this.config.chainConfig),engine.push(configMiddleware),(injectedProviderProxy=this.getInjectedProviderProxy(injectedProvider))&&engine.push(injectedProviderProxy),provider=(0,baseControllers_esm.Xj)(engine),this.updateProviderEngineProxy(provider),_context2.next=12,this.lookupNetwork();case 12:case"end":return _context2.stop()}},_callee2,this)})),function(_x2){return _setupProvider.apply(this,arguments)})},{key:"lookupNetwork",value:(_lookupNetwork=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(){var chainConfig;return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return chainConfig=this.config.chainConfig,this.update({chainId:chainConfig.chainId}),_context3.abrupt("return",chainConfig.chainId||"");case 3:case"end":return _context3.stop()}},_callee3,this)})),function(){return _lookupNetwork.apply(this,arguments)})},{key:"getInjectedProviderProxy",value:function(_){}}]),BaseInjectedProvider}(BaseProvider),getBaseProviderHandlers=function(injectedProvider){var _requestAccounts,_getAccounts,_getPrivateKey,_getSecretKey,_signTransaction,_signMessage,_signAllTransactions,_signAndSendTransaction;return{requestAccounts:(_requestAccounts=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(){return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",injectedProvider.publicKey?[node_modules_bs58_default().encode(injectedProvider.publicKey.toBytes())]:[]);case 1:case"end":return _context.stop()}},_callee)})),function(){return _requestAccounts.apply(this,arguments)}),getAccounts:(_getAccounts=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(){return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",injectedProvider.publicKey?[node_modules_bs58_default().encode(injectedProvider.publicKey.toBytes())]:[]);case 1:case"end":return _context2.stop()}},_callee2)})),function(){return _getAccounts.apply(this,arguments)}),getPrivateKey:(_getPrivateKey=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(){return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:throw dist.ethErrors.rpc.methodNotSupported();case 1:case"end":return _context3.stop()}},_callee3)})),function(){return _getPrivateKey.apply(this,arguments)}),getSecretKey:(_getSecretKey=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee4(){return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:throw dist.ethErrors.rpc.methodNotSupported();case 1:case"end":return _context4.stop()}},_callee4)})),function(){return _getSecretKey.apply(this,arguments)}),signTransaction:(_signTransaction=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee5(req){var transaction;return regenerator_default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,injectedProvider.signTransaction(req.params.message);case 2:return transaction=_context5.sent,_context5.abrupt("return",transaction);case 4:case"end":return _context5.stop()}},_callee5)})),function(_x){return _signTransaction.apply(this,arguments)}),signMessage:(_signMessage=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee6(req){var sigData;return regenerator_default().wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,injectedProvider.signMessage(req.params.message,req.params.display);case 2:return sigData=_context6.sent,_context6.abrupt("return",sigData.signature);case 4:case"end":return _context6.stop()}},_callee6)})),function(_x2){return _signMessage.apply(this,arguments)}),signAllTransactions:(_signAllTransactions=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee7(req){var _req$params,_req$params2,transaction;return regenerator_default().wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(!(!(null!==(_req$params=req.params)&&void 0!==_req$params&&_req$params.message)||!(null!==(_req$params2=req.params)&&void 0!==_req$params2&&_req$params2.message.length))){_context7.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:return _context7.next=4,injectedProvider.signAllTransactions(req.params.message);case 4:return transaction=_context7.sent,_context7.abrupt("return",transaction);case 6:case"end":return _context7.stop()}},_callee7)})),function(_x3){return _signAllTransactions.apply(this,arguments)}),signAndSendTransaction:(_signAndSendTransaction=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee8(req){var txRes;return regenerator_default().wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.next=2,injectedProvider.signAndSendTransaction(req.params.message);case 2:return txRes=_context8.sent,_context8.abrupt("return",{signature:txRes.signature});case 4:case"end":return _context8.stop()}},_callee8)})),function(_x4){return _signAndSendTransaction.apply(this,arguments)})}};function ownKeys$2(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}var PhantomInjectedProvider=function(_BaseInjectedProvider){(0,inherits.Z)(PhantomInjectedProvider,_BaseInjectedProvider);var hasNativeReflectConstruct,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(PhantomInjectedProvider);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function PhantomInjectedProvider(){return(0,classCallCheck.Z)(this,PhantomInjectedProvider),_super.apply(this,arguments)}return(0,createClass.Z)(PhantomInjectedProvider,[{key:"getProviderHandlers",value:function(injectedProvider){return getBaseProviderHandlers(injectedProvider)}},{key:"getInjectedProviderProxy",value:function(injectedProvider){var _ref;return(0,openloginJrpc_esm.Pk)((_ref=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(req,res,_next){var result;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,injectedProvider.request(function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys$2(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys$2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}({},req));case 2:result=_context.sent,res.result=result;case 4:case"end":return _context.stop()}},_callee)})),function(_x,_x2,_x3){return _ref.apply(this,arguments)}))}}]),PhantomInjectedProvider}(BaseInjectedProvider);function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _getProviderHandlers(){return(_getProviderHandlers=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee9(_ref){var privKey,getProviderEngineProxy,keyPairGenerator,keyPair,providerHandlers;return regenerator_default().wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(privKey=_ref.privKey,getProviderEngineProxy=_ref.getProviderEngineProxy,keyPairGenerator=function(){return index_browser_esm.RG.fromSecretKey(Buffer.from(privKey,"hex"))},!("string"!=typeof privKey)){_context9.next=4;break}throw WalletInitializationError.invalidParams("privKey must be a string");case 4:return keyPair=keyPairGenerator(),providerHandlers={requestAccounts:function(){var _requestAccounts=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(){return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",[keyPair.publicKey.toBase58()]);case 1:case"end":return _context.stop()}},_callee)}));return function(){return _requestAccounts.apply(this,arguments)}}(),getAccounts:function(){var _getAccounts=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(){return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",[keyPair.publicKey.toBase58()]);case 1:case"end":return _context2.stop()}},_callee2)}));return function(){return _getAccounts.apply(this,arguments)}}(),getPrivateKey:function(){var _getPrivateKey=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(){return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",privKey);case 1:case"end":return _context3.stop()}},_callee3)}));return function(){return _getPrivateKey.apply(this,arguments)}}(),getSecretKey:function(){var _getSecretKey=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee4(){return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",node_modules_bs58_default().encode(keyPair.secretKey));case 1:case"end":return _context4.stop()}},_callee4)}));return function(){return _getSecretKey.apply(this,arguments)}}(),signTransaction:function(){var _signTransaction=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee5(req){var _req$params,transaction;return regenerator_default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(null!==(_req$params=req.params)&&void 0!==_req$params&&_req$params.message){_context5.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:return(transaction=req.params.message).partialSign(keyPair),_context5.abrupt("return",transaction);case 5:case"end":return _context5.stop()}},_callee5)}));return function(_x2){return _signTransaction.apply(this,arguments)}}(),signMessage:function(){var _signMessage=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee6(req){var _req$params2,signedMsg;return regenerator_default().wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(null!==(_req$params2=req.params)&&void 0!==_req$params2&&_req$params2.message){_context6.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:return signedMsg=nacl_fast_default().sign.detached(req.params.message,keyPair.secretKey),_context6.abrupt("return",signedMsg);case 4:case"end":return _context6.stop()}},_callee6)}));return function(_x3){return _signMessage.apply(this,arguments)}}(),signAndSendTransaction:function(){var _signAndSendTransaction=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee7(req){var _req$params3,_providerEngineProxy,transaction,sig;return regenerator_default().wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(null!==(_req$params3=req.params)&&void 0!==_req$params3&&_req$params3.message){_context7.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:if(_providerEngineProxy=getProviderEngineProxy()){_context7.next=5;break}throw dist.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return(transaction=req.params.message).sign(keyPair),_context7.next=9,_providerEngineProxy.request({method:"sendTransaction",params:[node_modules_bs58_default().encode(transaction.serialize())]});case 9:return sig=_context7.sent,_context7.abrupt("return",{signature:sig});case 11:case"end":return _context7.stop()}},_callee7)}));return function(_x4){return _signAndSendTransaction.apply(this,arguments)}}(),signAllTransactions:function(){var _signAllTransactions=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee8(req){var _req$params4,_req$params5,_req$params6,txns,_iterator,_step;return regenerator_default().wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(!(!(null!==(_req$params4=req.params)&&void 0!==_req$params4&&_req$params4.message)||!(null!==(_req$params5=req.params)&&void 0!==_req$params5&&_req$params5.message.length))){_context8.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:_iterator=function(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}}(o))){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}((txns=null===(_req$params6=req.params)||void 0===_req$params6?void 0:_req$params6.message)||[]);try{for(_iterator.s();!(_step=_iterator.n()).done;)_step.value.partialSign(keyPair)}catch(err){_iterator.e(err)}finally{_iterator.f()}return _context8.abrupt("return",txns);case 6:case"end":return _context8.stop()}},_callee8)}));return function(_x5){return _signAllTransactions.apply(this,arguments)}}()},_context9.abrupt("return",providerHandlers);case 7:case"end":return _context9.stop()}},_callee9)}))).apply(this,arguments)}function solanaProvider_esm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function solanaProvider_esm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?solanaProvider_esm_ownKeys(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):solanaProvider_esm_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}var SolanaPrivateKeyProvider=function(_BaseProvider){(0,inherits.Z)(SolanaPrivateKeyProvider,_BaseProvider);var hasNativeReflectConstruct,_enable,_setupProvider,_updateAccount,_switchChain,_lookupNetwork,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(SolanaPrivateKeyProvider);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function SolanaPrivateKeyProvider(_ref){var config=_ref.config,state=_ref.state;return(0,classCallCheck.Z)(this,SolanaPrivateKeyProvider),_super.call(this,{config:{chainConfig:solanaProvider_esm_objectSpread(solanaProvider_esm_objectSpread({},config.chainConfig),{},{chainNamespace:CHAIN_NAMESPACES.SOLANA})},state:state})}return(0,createClass.Z)(SolanaPrivateKeyProvider,[{key:"enable",value:(_enable=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(){return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(this.state.privateKey){_context.next=2;break}throw dist.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return _context.next=4,this.setupProvider(this.state.privateKey);case 4:return _context.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return _context.stop()}},_callee,this)})),function(){return _enable.apply(this,arguments)})},{key:"setupProvider",value:(_setupProvider=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(privKey){var solanaMiddleware,engine,networkMiddleware,provider;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,function(_x){return _getProviderHandlers.apply(this,arguments)}({privKey:privKey,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)});case 2:return solanaMiddleware=createSolanaMiddleware(_context2.sent),engine=new openloginJrpc_esm.eI,networkMiddleware=function(providerConfig){var rpcTarget=providerConfig.rpcTarget,fetchMiddleware=(0,baseControllers_esm.v$)({rpcTarget:rpcTarget});return{networkMiddleware:(0,openloginJrpc_esm.UZ)([createConfigMiddleware(providerConfig),fetchMiddleware]),fetchMiddleware:fetchMiddleware}}(this.config.chainConfig).networkMiddleware,engine.push(this.getChainSwitchMiddleware()),engine.push(this.getAccountMiddleware()),engine.push(solanaMiddleware),engine.push(networkMiddleware),provider=(0,baseControllers_esm.Xj)(engine),this.updateProviderEngineProxy(provider),_context2.next=14,this.lookupNetwork();case 14:case"end":return _context2.stop()}},_callee2,this)})),function(_x){return _setupProvider.apply(this,arguments)})},{key:"updateAccount",value:(_updateAccount=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(params){return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(this._providerEngineProxy){_context3.next=2;break}throw dist.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return _context3.next=4,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 4:if(!(_context3.sent!==params.privateKey)){_context3.next=14;break}return _context3.next=8,this.setupProvider(params.privateKey);case 8:return _context3.t0=this._providerEngineProxy,_context3.next=11,this._providerEngineProxy.request({method:"requestAccounts"});case 11:_context3.t1=_context3.sent,_context3.t2={accounts:_context3.t1},_context3.t0.emit.call(_context3.t0,"accountsChanged",_context3.t2);case 14:case"end":return _context3.stop()}},_callee3,this)})),function(_x2){return _updateAccount.apply(this,arguments)})},{key:"switchChain",value:(_switchChain=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee4(params){var chainConfig,privKey;return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(this._providerEngineProxy){_context4.next=2;break}throw dist.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return chainConfig=this.getChainConfig(params.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:chainConfig}),_context4.next=7,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 7:return privKey=_context4.sent,_context4.next=10,this.setupProvider(privKey);case 10:case"end":return _context4.stop()}},_callee4,this)})),function(_x3){return _switchChain.apply(this,arguments)})},{key:"lookupNetwork",value:(_lookupNetwork=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee5(){var health,chainConfig;return regenerator_default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(this._providerEngineProxy){_context5.next=2;break}throw dist.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return _context5.next=4,this._providerEngineProxy.request({method:"getHealth",params:[]});case 4:if(health=_context5.sent,chainConfig=this.config.chainConfig,!("ok"!==health)){_context5.next=8;break}throw WalletInitializationError.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(chainConfig.rpcTarget));case 8:return this.update({chainId:chainConfig.chainId}),this.state.chainId!==chainConfig.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),_context5.abrupt("return",this.state.chainId);case 11:case"end":return _context5.stop()}},_callee5,this)})),function(){return _lookupNetwork.apply(this,arguments)})},{key:"getChainSwitchMiddleware",value:function(){var _addNewChainConfig,_switchSolanaChain,_ref6,addNewChainConfig,switchSolanaChain,_this=this;return addNewChainConfig=(_ref6={addNewChainConfig:(_addNewChainConfig=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee6(req){var _req$params,chainId,chainName,rpcUrls,blockExplorerUrls,nativeCurrency;return regenerator_default().wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(req.params){_context6.next=2;break}throw dist.ethErrors.rpc.invalidParams("Missing request params");case 2:if(chainId=(_req$params=req.params).chainId,chainName=_req$params.chainName,rpcUrls=_req$params.rpcUrls,blockExplorerUrls=_req$params.blockExplorerUrls,nativeCurrency=_req$params.nativeCurrency,chainId){_context6.next=5;break}throw dist.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(!(!rpcUrls||0===rpcUrls.length)){_context6.next=7;break}throw dist.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(nativeCurrency){_context6.next=9;break}throw dist.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:_this.addChain({chainNamespace:CHAIN_NAMESPACES.SOLANA,chainId:chainId,ticker:(null==nativeCurrency?void 0:nativeCurrency.symbol)||"SOL",tickerName:(null==nativeCurrency?void 0:nativeCurrency.name)||"Solana",displayName:chainName,rpcTarget:rpcUrls[0],blockExplorer:(null==blockExplorerUrls?void 0:blockExplorerUrls[0])||""});case 10:case"end":return _context6.stop()}},_callee6)})),function(_x4){return _addNewChainConfig.apply(this,arguments)}),switchSolanaChain:(_switchSolanaChain=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee7(req){return regenerator_default().wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(req.params){_context7.next=2;break}throw dist.ethErrors.rpc.invalidParams("Missing request params");case 2:if(req.params.chainId){_context7.next=4;break}throw dist.ethErrors.rpc.invalidParams("Missing chainId");case 4:return _context7.next=6,_this.switchChain(req.params);case 6:case"end":return _context7.stop()}},_callee7)})),function(_x5){return _switchSolanaChain.apply(this,arguments)})}).addNewChainConfig,switchSolanaChain=_ref6.switchSolanaChain,(0,openloginJrpc_esm.UZ)([createGenericJRPCMiddleware("addSolanaChain",addNewChainConfig),createGenericJRPCMiddleware("switchSolanaChain",switchSolanaChain)])}},{key:"getAccountMiddleware",value:function(){var _updatePrivatekey,updatePrivatekey,_this2=this;return updatePrivatekey=({updatePrivatekey:(_updatePrivatekey=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee8(req){var privateKey;return regenerator_default().wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(req.params){_context8.next=2;break}throw dist.ethErrors.rpc.invalidParams("Missing request params");case 2:if(req.params.privateKey){_context8.next=4;break}throw dist.ethErrors.rpc.invalidParams("Missing privateKey");case 4:return privateKey=req.params.privateKey,_context8.next=7,_this2.updateAccount({privateKey:privateKey});case 7:case"end":return _context8.stop()}},_callee8)})),function(_x6){return _updatePrivatekey.apply(this,arguments)})}).updatePrivatekey,(0,openloginJrpc_esm.UZ)([createGenericJRPCMiddleware("updateAccount",updatePrivatekey)])}}]),SolanaPrivateKeyProvider}(BaseProvider);(0,defineProperty.Z)(SolanaPrivateKeyProvider,"getProviderInstance",(_ref22=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee9(params){var providerFactory;return regenerator_default().wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return providerFactory=new SolanaPrivateKeyProvider({config:{chainConfig:params.chainConfig}}),_context9.next=3,providerFactory.setupProvider(params.privKey);case 3:return _context9.abrupt("return",providerFactory);case 4:case"end":return _context9.stop()}},_callee9)})),function(_x7){return _ref22.apply(this,arguments)}));var detectProvider=(_ref23=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(){var _window$solana,options,_args2=arguments;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(options=_args2.length>0&&void 0!==_args2[0]?_args2[0]:{interval:1e3,count:3},!("undefined"!=typeof window&&null!==(_window$solana=window.solana)&&void 0!==_window$solana&&_window$solana.isPhantom)){_context2.next=4;break}return _context2.abrupt("return",window.solana);case 4:return _context2.next=6,function poll(callback,interval,count){return new Promise(function(resolve,reject){count>0?setTimeout((0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(){var done;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,callback();case 2:(done=_context.sent)&&resolve(done),done||poll(callback,interval,count-1).then(function(res){return resolve(res),res}).catch(function(err){return reject(err)});case 5:case"end":return _context.stop()}},_callee)})),interval):resolve(!1)})}(function(){var _window$solana2;return null===(_window$solana2=window.solana)||void 0===_window$solana2?void 0:_window$solana2.isPhantom},options.interval,options.count);case 6:if(!_context2.sent){_context2.next=9;break}return _context2.abrupt("return",window.solana);case 9:return _context2.abrupt("return",null);case 10:case"end":return _context2.stop()}},_callee2)})),function(){return _ref23.apply(this,arguments)}),PhantomAdapter=function(_BaseSolanaAdapter){(0,inherits.Z)(PhantomAdapter,_BaseSolanaAdapter);var hasNativeReflectConstruct,_init,_connect,_disconnect,_getUserInfo,_connectWithProvider,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(PhantomAdapter);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function PhantomAdapter(options){var _this;return(0,classCallCheck.Z)(this,PhantomAdapter),_this=_super.call(this,options),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"name",WALLET_ADAPTERS.PHANTOM),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"adapterNamespace",ADAPTER_NAMESPACES.SOLANA),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"currentChainNamespace",CHAIN_NAMESPACES.SOLANA),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"type",ADAPTER_CATEGORY.EXTERNAL),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"status",ADAPTER_STATUS.NOT_READY),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"_wallet",null),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"phantomProvider",null),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"rehydrated",!1),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"_onDisconnect",function(){_this._wallet&&(_this._wallet.off("disconnect",_this._onDisconnect),_this.rehydrated=!1,_this.status=_this.status===ADAPTER_STATUS.CONNECTED?ADAPTER_STATUS.READY:ADAPTER_STATUS.NOT_READY,_this.emit(ADAPTER_EVENTS.DISCONNECTED))}),_this.chainConfig=(null==options?void 0:options.chainConfig)||null,_this.sessionTime=(null==options?void 0:options.sessionTime)||86400,_this}return(0,createClass.Z)(PhantomAdapter,[{key:"isWalletConnected",get:function(){var _this$_wallet;return!!(null!==(_this$_wallet=this._wallet)&&void 0!==_this$_wallet&&_this$_wallet.isConnected&&this.status===ADAPTER_STATUS.CONNECTED)}},{key:"provider",get:function(){var _this$phantomProvider;return(null===(_this$phantomProvider=this.phantomProvider)||void 0===_this$phantomProvider?void 0:_this$phantomProvider.provider)||null},set:function(_){throw Error("Not implemented")}},{key:"setAdapterSettings",value:function(options){this.status!==ADAPTER_STATUS.READY&&(null!=options&&options.sessionTime&&(this.sessionTime=options.sessionTime),null!=options&&options.clientId&&(this.clientId=options.clientId))}},{key:"init",value:(_init=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(options){return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return(0,get.Z)((0,getPrototypeOf.Z)(PhantomAdapter.prototype),"checkInitializationRequirements",this).call(this),this.chainConfig||(this.chainConfig=getChainConfig(CHAIN_NAMESPACES.SOLANA,"0x1")),_context.next=4,detectProvider({interval:500,count:3});case 4:if(this._wallet=_context.sent,this._wallet){_context.next=7;break}throw WalletInitializationError.notInstalled();case 7:if(this.phantomProvider=new PhantomInjectedProvider({config:{chainConfig:this.chainConfig}}),this.status=ADAPTER_STATUS.READY,this.emit(ADAPTER_EVENTS.READY,WALLET_ADAPTERS.PHANTOM),_context.prev=10,log.debug("initializing phantom adapter"),!options.autoConnect){_context.next=16;break}return this.rehydrated=!0,_context.next=16,this.connect();case 16:_context.next=22;break;case 18:_context.prev=18,_context.t0=_context.catch(10),log.error("Failed to connect with cached phantom provider",_context.t0),this.emit("ERRORED",_context.t0);case 22:case"end":return _context.stop()}},_callee,this,[[10,18]])})),function(_x){return _init.apply(this,arguments)})},{key:"connect",value:(_connect=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(){var handleDisconnect,_this2=this;return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_context3.prev=0,(0,get.Z)((0,getPrototypeOf.Z)(PhantomAdapter.prototype),"checkConnectionRequirements",this).call(this),this.status=ADAPTER_STATUS.CONNECTING,this.emit(ADAPTER_EVENTS.CONNECTING,{adapter:WALLET_ADAPTERS.PHANTOM}),this._wallet){_context3.next=6;break}throw WalletInitializationError.notInstalled();case 6:if(this._wallet.isConnected){_context3.next=23;break}return handleDisconnect=this._wallet._handleDisconnect,_context3.prev=8,_context3.next=11,new Promise(function(resolve,reject){var connect=function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(){return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_this2.connectWithProvider(_this2._wallet);case 2:resolve(_this2.provider);case 3:case"end":return _context2.stop()}},_callee2)}));return function(){return _ref.apply(this,arguments)}}();if(!_this2._wallet)return reject(WalletInitializationError.notInstalled());_this2._wallet.once("connect",connect),_this2._wallet._handleDisconnect=function(){reject(WalletInitializationError.windowClosed());for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return handleDisconnect.apply(_this2._wallet,args)},_this2._wallet.connect().catch(function(reason){reject(reason)})});case 11:_context3.next=18;break;case 13:if(_context3.prev=13,_context3.t0=_context3.catch(8),!(_context3.t0 instanceof Web3AuthError)){_context3.next=17;break}throw _context3.t0;case 17:throw WalletLoginError.connectionError(null===_context3.t0||void 0===_context3.t0?void 0:_context3.t0.message);case 18:return _context3.prev=18,this._wallet._handleDisconnect=handleDisconnect,_context3.finish(18);case 21:_context3.next=25;break;case 23:return _context3.next=25,this.connectWithProvider(this._wallet);case 25:if(this._wallet.publicKey){_context3.next=27;break}throw WalletLoginError.connectionError();case 27:return this._wallet.on("disconnect",this._onDisconnect),_context3.abrupt("return",this.provider);case 31:throw _context3.prev=31,_context3.t1=_context3.catch(0),this.status=ADAPTER_STATUS.READY,this.rehydrated=!1,this.emit(ADAPTER_EVENTS.ERRORED,_context3.t1),_context3.t1;case 37:case"end":return _context3.stop()}},_callee3,this,[[0,31],[8,13,18,21]])})),function(){return _connect.apply(this,arguments)})},{key:"disconnect",value:(_disconnect=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee4(){var options,_this$_wallet2,_args4=arguments;return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return options=_args4.length>0&&void 0!==_args4[0]?_args4[0]:{cleanup:!1},_context4.next=3,(0,get.Z)((0,getPrototypeOf.Z)(PhantomAdapter.prototype),"disconnect",this).call(this);case 3:return _context4.prev=3,_context4.next=6,null===(_this$_wallet2=this._wallet)||void 0===_this$_wallet2?void 0:_this$_wallet2.disconnect();case 6:options.cleanup&&(this.status=ADAPTER_STATUS.NOT_READY,this.phantomProvider=null,this._wallet=null),this.emit(ADAPTER_EVENTS.DISCONNECTED),_context4.next=13;break;case 10:_context4.prev=10,_context4.t0=_context4.catch(3),this.emit(ADAPTER_EVENTS.ERRORED,WalletLoginError.disconnectionError(null===_context4.t0||void 0===_context4.t0?void 0:_context4.t0.message));case 13:case"end":return _context4.stop()}},_callee4,this,[[3,10]])})),function(){return _disconnect.apply(this,arguments)})},{key:"getUserInfo",value:(_getUserInfo=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee5(){return regenerator_default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(this.isWalletConnected){_context5.next=2;break}throw WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return _context5.abrupt("return",{});case 3:case"end":return _context5.stop()}},_callee5,this)})),function(){return _getUserInfo.apply(this,arguments)})},{key:"connectWithProvider",value:(_connectWithProvider=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee6(injectedProvider){return regenerator_default().wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(this.phantomProvider){_context6.next=2;break}throw WalletLoginError.connectionError("No phantom provider");case 2:return _context6.next=4,this.phantomProvider.setupProvider(injectedProvider);case 4:return this.status=ADAPTER_STATUS.CONNECTED,this.emit(ADAPTER_EVENTS.CONNECTED,{adapter:WALLET_ADAPTERS.PHANTOM,reconnected:this.rehydrated}),_context6.abrupt("return",this.provider);case 7:case"end":return _context6.stop()}},_callee6,this)})),function(_x2){return _connectWithProvider.apply(this,arguments)})}]),PhantomAdapter}(BaseSolanaAdapter)},9193:function(module,__unused_webpack_exports,__webpack_require__){let basex=__webpack_require__(74341);module.exports=basex("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},74341:function(module){"use strict";module.exports=function(ALPHABET){if(ALPHABET.length>=255)throw TypeError("Alphabet too long");for(var BASE_MAP=new Uint8Array(256),j=0;j<BASE_MAP.length;j++)BASE_MAP[j]=255;for(var i=0;i<ALPHABET.length;i++){var x=ALPHABET.charAt(i),xc=x.charCodeAt(0);if(255!==BASE_MAP[xc])throw TypeError(x+" is ambiguous");BASE_MAP[xc]=i}var BASE=ALPHABET.length,LEADER=ALPHABET.charAt(0),FACTOR=Math.log(BASE)/Math.log(256),iFACTOR=Math.log(256)/Math.log(BASE);function decodeUnsafe(source){if("string"!=typeof source)throw TypeError("Expected String");if(0===source.length)return new Uint8Array;for(var psz=0,zeroes=0,length=0;source[psz]===LEADER;)zeroes++,psz++;for(var size=(source.length-psz)*FACTOR+1>>>0,b256=new Uint8Array(size);source[psz];){var carry=BASE_MAP[source.charCodeAt(psz)];if(255===carry)return;for(var i=0,it3=size-1;(0!==carry||i<length)&&-1!==it3;it3--,i++)carry+=BASE*b256[it3]>>>0,b256[it3]=carry%256>>>0,carry=carry/256>>>0;if(0!==carry)throw Error("Non-zero carry");length=i,psz++}for(var it4=size-length;it4!==size&&0===b256[it4];)it4++;for(var vch=new Uint8Array(zeroes+(size-it4)),j=zeroes;it4!==size;)vch[j++]=b256[it4++];return vch}return{encode:function(source){if(source instanceof Uint8Array||(ArrayBuffer.isView(source)?source=new Uint8Array(source.buffer,source.byteOffset,source.byteLength):Array.isArray(source)&&(source=Uint8Array.from(source))),!(source instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===source.length)return"";for(var zeroes=0,length=0,pbegin=0,pend=source.length;pbegin!==pend&&0===source[pbegin];)pbegin++,zeroes++;for(var size=(pend-pbegin)*iFACTOR+1>>>0,b58=new Uint8Array(size);pbegin!==pend;){for(var carry=source[pbegin],i=0,it1=size-1;(0!==carry||i<length)&&-1!==it1;it1--,i++)carry+=256*b58[it1]>>>0,b58[it1]=carry%BASE>>>0,carry=carry/BASE>>>0;if(0!==carry)throw Error("Non-zero carry");length=i,pbegin++}for(var it2=size-length;it2!==size&&0===b58[it2];)it2++;for(var str=LEADER.repeat(zeroes);it2<size;++it2)str+=ALPHABET.charAt(b58[it2]);return str},decodeUnsafe:decodeUnsafe,decode:function(string){var buffer=decodeUnsafe(string);if(buffer)return buffer;throw Error("Non-base"+BASE+" character")}}}}}]);