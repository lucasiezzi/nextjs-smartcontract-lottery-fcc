(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[785],{39785:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SolanaWalletAdapter:function(){return SolanaWalletAdapter}});var _ref,_ref2,_ref21,_ref22,asyncToGenerator=__webpack_require__(15861),classCallCheck=__webpack_require__(15671),createClass=__webpack_require__(43144),assertThisInitialized=__webpack_require__(97326),get=__webpack_require__(73237),inherits=__webpack_require__(60136),possibleConstructorReturn=__webpack_require__(82963),getPrototypeOf=__webpack_require__(61120),defineProperty=__webpack_require__(4942),regenerator=__webpack_require__(64687),regenerator_default=__webpack_require__.n(regenerator),index_browser_esm=__webpack_require__(59917),baseControllers_esm=__webpack_require__(22782),httpHelpers_esm=__webpack_require__(20917),openloginJrpc_esm=__webpack_require__(64049),dist=__webpack_require__(79826),is_stream=__webpack_require__(24970),pump=__webpack_require__(74286),pump_default=__webpack_require__.n(pump),loglevel=__webpack_require__(2043),loglevel_default=__webpack_require__.n(loglevel),fast_deep_equal=__webpack_require__(64063),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),Buffer=__webpack_require__(48764).Buffer,messages={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:method=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${method} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:maxEventListeners=>`Invalid options. Received: { maxEventListeners: ${maxEventListeners}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:method=>`'args.logger' must include required method '${method}'.`},info:{connected:chainId=>`Torus: Connected to chain with ID "${chainId}".`},warnings:{}};let TORUS_BUILD_ENV={PRODUCTION:"production",DEVELOPMENT:"development",TESTING:"testing"},BUTTON_POSITION={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},LOGIN_PROVIDER={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",LINE:"line",GITHUB:"github",KAKAO:"kakao",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",WECHAT:"wechat",EMAIL_PASSWORDLESS:"email_passwordless"};var configuration={supportedVerifierList:[LOGIN_PROVIDER.GOOGLE,LOGIN_PROVIDER.REDDIT,LOGIN_PROVIDER.DISCORD],api:"https://api.tor.us",translations:{en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies ben\xf6tigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}},prodTorusUrl:"",localStorageKey:`torus-${window.location.hostname}`},log=loglevel_default().getLogger("solana-embed");let getWindowId=()=>Math.random().toString(36).slice(2),getTorusUrl=async buildEnv=>{let torusUrl,logLevel;switch(buildEnv){case"testing":torusUrl="https://solana-testing.tor.us",logLevel="debug";break;case"development":torusUrl="http://localhost:8080",logLevel="debug";break;default:torusUrl="https://solana.tor.us",logLevel="error"}return{torusUrl,logLevel}},getUserLanguage=()=>{let userLanguage=window.navigator.language||"en-US",userLanguages=userLanguage.split("-");return Object.prototype.hasOwnProperty.call(configuration.translations,userLanguages[0])?userLanguages[0]:"en"},FEATURES_PROVIDER_CHANGE_WINDOW={height:660,width:375},FEATURES_DEFAULT_WALLET_WINDOW={height:740,width:1315},FEATURES_DEFAULT_POPUP_WINDOW={height:700,width:1200},FEATURES_CONFIRM_WINDOW={height:600,width:400};function getPopupFeatures(_ref){let{width:w,height:h}=_ref,dualScreenLeft=void 0!==window.screenLeft?window.screenLeft:window.screenX,dualScreenTop=void 0!==window.screenTop?window.screenTop:window.screenY,width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,features=`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${h/1},width=${w/1},top=${Math.abs((height-h)/2/1+dualScreenTop)},left=${Math.abs((width-w)/2/1+dualScreenLeft)}`;return features}class BaseProvider extends openloginJrpc_esm.Ue{constructor(connectionStream,_ref){let{maxEventListeners=100,jsonRpcStreamName="provider"}=_ref;if(super(),(0,defineProperty.Z)(this,"isTorus",void 0),(0,defineProperty.Z)(this,"_rpcEngine",void 0),(0,defineProperty.Z)(this,"jsonRpcConnectionEvents",void 0),(0,defineProperty.Z)(this,"_state",void 0),!(0,is_stream.duplex)(connectionStream))throw Error(messages.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(maxEventListeners),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);let mux=new openloginJrpc_esm.O4;pump_default()(connectionStream,mux,connectionStream,this._handleStreamDisconnect.bind(this,"Torus")),mux.ignoreStream("phishing");let jsonRpcConnection=(0,openloginJrpc_esm.AP)();pump_default()(jsonRpcConnection.stream,mux.createStream(jsonRpcStreamName),jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));let rpcEngine=new openloginJrpc_esm.eI;rpcEngine.push((0,openloginJrpc_esm.Rq)()),rpcEngine.push((req,res,next)=>{"string"==typeof req.method&&req.method||(res.error=dist.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:req})),next(done=>{let{error}=res;return error&&log.error(`Torus - RPC Error: ${error.message}`,error),done()})}),rpcEngine.push((0,baseControllers_esm.yh)({origin:location.origin})),rpcEngine.push(jsonRpcConnection.middleware),this._rpcEngine=rpcEngine,this.jsonRpcConnectionEvents=jsonRpcConnection.events}async request(args){if(!args||"object"!=typeof args||Array.isArray(args))throw dist.ethErrors.rpc.invalidRequest({message:messages.errors.invalidRequestArgs(),data:args});let{method,params}=args;if("string"!=typeof method||0===method.length)throw dist.ethErrors.rpc.invalidRequest({message:messages.errors.invalidRequestMethod(),data:args});if(void 0!==params&&!Array.isArray(params)&&("object"!=typeof params||null===params))throw dist.ethErrors.rpc.invalidRequest({message:messages.errors.invalidRequestParams(),data:args});return new Promise((resolve,reject)=>{this._rpcRequest({method,params},(0,openloginJrpc_esm.nE)(resolve,reject))})}send(payload,callback){this._rpcRequest(payload,callback)}sendAsync(payload){return new Promise((resolve,reject)=>{this._rpcRequest(payload,(0,openloginJrpc_esm.nE)(resolve,reject))})}_handleStreamDisconnect(streamName,error){let warningMsg;warningMsg=`Torus: Lost connection to "${streamName}".`,null!=error&&error.stack&&(warningMsg+=`
${error.stack}`),log.warn(warningMsg),this&&this.listenerCount("error")>0&&this.emit("error",warningMsg),this._handleDisconnect(!1,error?error.message:void 0)}}let handleEvent=function(handle,eventName,handler){for(var _len=arguments.length,handlerArgs=Array(_len>3?_len-3:0),_key=3;_key<_len;_key++)handlerArgs[_key-3]=arguments[_key];let handlerWrapper=()=>{handler(...handlerArgs),handle.removeEventListener(eventName,handlerWrapper)};handle.addEventListener(eventName,handlerWrapper)};async function documentReady(){return new Promise(resolve=>{"loading"!==document.readyState?resolve():handleEvent(document,"DOMContentLoaded",resolve)})}let htmlToElement=html=>{let template=window.document.createElement("template"),trimmedHtml=html.trim();return template.innerHTML=trimmedHtml,template.content.firstChild};class PopupHandler extends openloginJrpc_esm.Ue{constructor(_ref){let{url,target,features}=_ref;super(),(0,defineProperty.Z)(this,"url",void 0),(0,defineProperty.Z)(this,"target",void 0),(0,defineProperty.Z)(this,"features",void 0),(0,defineProperty.Z)(this,"window",void 0),(0,defineProperty.Z)(this,"windowTimer",void 0),(0,defineProperty.Z)(this,"iClosedWindow",void 0),this.url=url,this.target=target||"_blank",this.features=features||getPopupFeatures(FEATURES_DEFAULT_POPUP_WINDOW),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),void 0===this.window&&clearInterval(this.windowTimer)},500))}open(){var _this$window;return this.window=window.open(this.url.href,this.target,this.features),null!==(_this$window=this.window)&&void 0!==_this$window&&_this$window.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(locationReplaceOnRedirect){locationReplaceOnRedirect?window.location.replace(this.url.href):window.location.href=this.url.href}}function ownKeys$2(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}class TorusCommunicationProvider extends BaseProvider{constructor(connectionStream,_ref){let{maxEventListeners=100,jsonRpcStreamName="provider"}=_ref;super(connectionStream,{maxEventListeners,jsonRpcStreamName}),(0,defineProperty.Z)(this,"embedTranslations",void 0),(0,defineProperty.Z)(this,"torusUrl",void 0),(0,defineProperty.Z)(this,"dappStorageKey",void 0),(0,defineProperty.Z)(this,"windowRefs",void 0),(0,defineProperty.Z)(this,"tryWindowHandle",void 0),(0,defineProperty.Z)(this,"torusAlertContainer",void 0),(0,defineProperty.Z)(this,"torusIframe",void 0),this._state=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys$2(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys$2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}({},TorusCommunicationProvider._defaultState),this.torusUrl="",this.dappStorageKey="";let languageTranslations=configuration.translations[getUserLanguage()];this.embedTranslations=languageTranslations.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});let notificationHandler=payload=>{let{method,params}=payload;if(method===baseControllers_esm.Nb.IFRAME_STATUS){let{isFullScreen,rid}=params;this._displayIframe({isFull:isFullScreen,rid:rid})}else if(method===baseControllers_esm.Nb.CREATE_WINDOW){let{windowId,url}=params;this._createPopupBlockAlert(windowId,url)}else if(method===baseControllers_esm.Nb.CLOSE_WINDOW)this._handleCloseWindow(params);else if(method===baseControllers_esm.Nb.USER_LOGGED_IN){let{currentLoginProvider}=params;this._state.isLoggedIn=!0,this._state.currentLoginProvider=currentLoginProvider}else method===baseControllers_esm.Nb.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",notificationHandler)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(params){try{let{torusUrl,dappStorageKey,torusAlertContainer,torusIframe}=params;this.torusUrl=torusUrl,this.dappStorageKey=dappStorageKey,this.torusAlertContainer=torusAlertContainer,this.torusIframe=torusIframe,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});let{currentLoginProvider,isLoggedIn}=await this.request({method:baseControllers_esm.vU.GET_PROVIDER_STATE,params:[]});this._handleConnect(currentLoginProvider,isLoggedIn)}catch(error){log.error("Torus: Failed to get initial state. Please report this bug.",error)}finally{log.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(windowId){let{url,target,features}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},finalUrl=new URL(url||`${this.torusUrl}/redirect?windowId=${windowId}`);this.dappStorageKey&&(finalUrl.hash?finalUrl.hash+=`&dappStorageKey=${this.dappStorageKey}`:finalUrl.hash=`#dappStorageKey=${this.dappStorageKey}`);let handledWindow=new PopupHandler({url:finalUrl,target,features});if(handledWindow.open(),!handledWindow.window){this._createPopupBlockAlert(windowId,finalUrl.href);return}this.windowRefs[windowId]=handledWindow,this.request({method:baseControllers_esm.vU.OPENED_WINDOW,params:{windowId}}),handledWindow.once("close",()=>{delete this.windowRefs[windowId],this.request({method:baseControllers_esm.vU.CLOSED_WINDOW,params:{windowId}})})}_displayIframe(){let{isFull=!1,rid=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},style={};if(isFull)style.display="block",style.width="100%",style.height="100%",style.top="0px",style.right="0px",style.left="0px",style.bottom="0px";else switch(style.display=this._state.torusWidgetVisibility?"block":"none",style.height="70px",style.width="70px",this._state.buttonPosition){case BUTTON_POSITION.TOP_LEFT:style.top="0px",style.left="0px",style.right="auto",style.bottom="auto";break;case BUTTON_POSITION.TOP_RIGHT:style.top="0px",style.right="0px",style.left="auto",style.bottom="auto";break;case BUTTON_POSITION.BOTTOM_RIGHT:style.bottom="0px",style.right="0px",style.top="auto",style.left="auto";break;case BUTTON_POSITION.BOTTOM_LEFT:default:style.bottom="0px",style.left="0px",style.top="auto",style.right="auto"}Object.assign(this.torusIframe.style,style),this._state.isIFrameFullScreen=isFull,this.request({method:baseControllers_esm.vU.IFRAME_STATUS,params:{isIFrameFullScreen:isFull,rid}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(payload,callback){let _payload=payload;Array.isArray(_payload)||_payload.jsonrpc||(_payload.jsonrpc="2.0"),this.tryWindowHandle(_payload,callback)}_handleConnect(currentLoginProvider,isLoggedIn){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider,isLoggedIn}),log.debug(messages.info.connected(currentLoginProvider)))}_handleDisconnect(isRecoverable,errorMessage){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!isRecoverable){let error;this._state.isConnected=!1,isRecoverable?(error=new dist.EthereumRpcError(1013,errorMessage||messages.errors.disconnected()),log.debug(error)):(error=new dist.EthereumRpcError(1011,errorMessage||messages.errors.permanentlyDisconnected()),log.error(error),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",error)}}_handleCloseWindow(params){let{windowId}=params;this.windowRefs[windowId]&&(this.windowRefs[windowId].close(),delete this.windowRefs[windowId])}async _createPopupBlockAlert(windowId,url){let logoUrl=this.getLogoUrl(),torusAlert=htmlToElement(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${logoUrl}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),successAlert=htmlToElement(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),btnContainer=htmlToElement('<div id="torusAlert__btn-container"></div>');btnContainer.appendChild(successAlert),torusAlert.appendChild(btnContainer),await documentReady(),(()=>{this.torusAlertContainer.appendChild(torusAlert)})(),(()=>{successAlert.addEventListener("click",()=>{this._handleWindow(windowId,{url,target:"_blank",features:getPopupFeatures(FEATURES_CONFIRM_WINDOW)}),torusAlert.remove(),0===this.torusAlertContainer.children.length&&(this.torusAlertContainer.style.display="none")})})(),this.torusAlertContainer.style.display="block"}getLogoUrl(){let logoUrl=`${this.torusUrl}/images/torus_icon-blue.svg`;return logoUrl}}function ownKeys$1(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}(0,defineProperty.Z)(TorusCommunicationProvider,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class TorusInPageProvider extends BaseProvider{constructor(connectionStream,_ref){let{maxEventListeners=100,jsonRpcStreamName="provider"}=_ref;super(connectionStream,{maxEventListeners,jsonRpcStreamName}),(0,defineProperty.Z)(this,"chainId",void 0),(0,defineProperty.Z)(this,"selectedAddress",void 0),(0,defineProperty.Z)(this,"tryWindowHandle",void 0),this._state=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys$1(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys$1(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}({},TorusInPageProvider._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});let jsonRpcNotificationHandler=payload=>{let{method,params}=payload;method===baseControllers_esm.zK.ACCOUNTS_CHANGED?this._handleAccountsChanged(params):method===baseControllers_esm.zK.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(params):method===baseControllers_esm.zK.CHAIN_CHANGED&&this._handleChainChanged(params)};this.jsonRpcConnectionEvents.on("notification",jsonRpcNotificationHandler)}isConnected(){return this._state.isConnected}async _initializeState(){try{let{accounts,chainId,isUnlocked}=await this.request({method:baseControllers_esm.GA.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId}),this._handleChainChanged({chainId}),this._handleUnlockStateChanged({accounts,isUnlocked}),this._handleAccountsChanged(accounts)}catch(error){log.error("Torus: Failed to get initial state. Please report this bug.",error)}finally{log.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(payload,callback){let isInternal=arguments.length>2&&void 0!==arguments[2]&&arguments[2],cb=callback,_payload=payload;if(!Array.isArray(_payload)){if(_payload.jsonrpc||(_payload.jsonrpc="2.0"),"solana_accounts"===_payload.method||"solana_requestAccounts"===_payload.method)cb=(err,res)=>{this._handleAccountsChanged(res.result||[],"solana_accounts"===_payload.method,isInternal),callback(err,res)};else if("wallet_getProviderState"===_payload.method){this._rpcEngine.handle(payload,cb);return}}this.tryWindowHandle(_payload,cb)}_handleConnect(chainId){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId}),log.debug(messages.info.connected(chainId)))}_handleDisconnect(isRecoverable,errorMessage){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!isRecoverable){let error;this._state.isConnected=!1,isRecoverable?(error=new dist.EthereumRpcError(1013,errorMessage||messages.errors.disconnected()),log.debug(error)):(error=new dist.EthereumRpcError(1011,errorMessage||messages.errors.permanentlyDisconnected()),log.error(error),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",error)}}_handleAccountsChanged(accounts){let isEthAccounts=arguments.length>1&&void 0!==arguments[1]&&arguments[1],isInternal=arguments.length>2&&void 0!==arguments[2]&&arguments[2],finalAccounts=accounts;for(let account of(Array.isArray(finalAccounts)||(log.error("Torus: Received non-array accounts parameter. Please report this bug.",finalAccounts),finalAccounts=[]),accounts))if("string"!=typeof account){log.error("Torus: Received non-string account. Please report this bug.",accounts),finalAccounts=[];break}fast_deep_equal_default()(this._state.accounts,finalAccounts)||(isEthAccounts&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!isInternal&&log.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',finalAccounts),this._state.accounts=finalAccounts,this.emit("accountsChanged",finalAccounts)),this.selectedAddress!==finalAccounts[0]&&(this.selectedAddress=finalAccounts[0]||null)}_handleChainChanged(){let{chainId}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!chainId){log.error("Torus: Received invalid network parameters. Please report this bug.",{chainId});return}"loading"===chainId?this._handleDisconnect(!0):(this._handleConnect(chainId),chainId!==this.chainId&&(this.chainId=chainId,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts,isUnlocked}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("boolean"!=typeof isUnlocked){log.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked});return}isUnlocked!==this._state.isUnlocked&&(this._state.isUnlocked=isUnlocked,this._handleAccountsChanged(accounts||[]))}}function imgExists(url){return new Promise((resolve,reject)=>{try{let img=document.createElement("img");img.onload=()=>resolve(!0),img.onerror=()=>resolve(!1),img.src=url}catch(e){reject(e)}})}(0,defineProperty.Z)(TorusInPageProvider,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});let getSiteName=window1=>{let{document:document1}=window1,siteName=document1.querySelector('head > meta[property="og:site_name"]');if(siteName)return siteName.content;let metaTitle=document1.querySelector('head > meta[name="title"]');return metaTitle?metaTitle.content:document1.title&&document1.title.length>0?document1.title:window1.location.hostname};async function getSiteIcon(window1){try{let{document:document1}=window1,icon=document1.querySelector('head > link[rel="shortcut icon"]');if(icon&&await imgExists(icon.href)||(icon=Array.from(document1.querySelectorAll('head > link[rel="icon"]')).find(_icon=>Boolean(_icon.href)))&&await imgExists(icon.href))return icon.href;return""}catch(error){return""}}let getSiteMetadata=async()=>({name:getSiteName(window),icon:await getSiteIcon(window)});function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}let PROVIDER_UNSAFE_METHODS=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],COMMUNICATION_UNSAFE_METHODS=[baseControllers_esm.vU.SET_PROVIDER],isLocalStorageAvailable=function(type){let storage;try{storage=window[type];let x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),!0}catch(e){return e&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&storage&&0!==storage.length}}("localStorage");!async function(){try{if("undefined"==typeof document)return;let torusIframeHtml=document.createElement("link"),{torusUrl}=await getTorusUrl("production");torusIframeHtml.href=`${torusUrl}/frame`,torusIframeHtml.crossOrigin="anonymous",torusIframeHtml.type="text/html",torusIframeHtml.rel="prefetch",torusIframeHtml.relList&&torusIframeHtml.relList.supports&&torusIframeHtml.relList.supports("prefetch")&&document.head.appendChild(torusIframeHtml)}catch(error){log.warn(error)}}();class Torus{constructor(){let{modalZIndex=99999}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,defineProperty.Z)(this,"isInitialized",void 0),(0,defineProperty.Z)(this,"torusAlert",void 0),(0,defineProperty.Z)(this,"modalZIndex",void 0),(0,defineProperty.Z)(this,"alertZIndex",void 0),(0,defineProperty.Z)(this,"requestedLoginProvider",void 0),(0,defineProperty.Z)(this,"provider",void 0),(0,defineProperty.Z)(this,"communicationProvider",void 0),(0,defineProperty.Z)(this,"dappStorageKey",void 0),(0,defineProperty.Z)(this,"isTopupHidden",!1),(0,defineProperty.Z)(this,"torusAlertContainer",void 0),(0,defineProperty.Z)(this,"torusUrl",void 0),(0,defineProperty.Z)(this,"torusIframe",void 0),(0,defineProperty.Z)(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=modalZIndex,this.alertZIndex=modalZIndex+1e3,this.dappStorageKey=""}get isLoggedIn(){return!!this.communicationProvider&&this.communicationProvider.isLoggedIn}async init(){let{buildEnv=TORUS_BUILD_ENV.PRODUCTION,enableLogging=!1,network,showTorusButton=!1,useLocalStorage=!1,buttonPosition=BUTTON_POSITION.BOTTOM_LEFT,apiKey="torus-default",extraParams={},whiteLabel}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)throw Error("Already initialized");(0,httpHelpers_esm.ut)(apiKey);let{torusUrl,logLevel}=await getTorusUrl(buildEnv);log.enableAll(),log.info(torusUrl,"url loaded"),log.info("Solana Embed Version :0.3.2"),this.torusUrl=torusUrl,log.setDefaultLevel(logLevel),enableLogging?log.enableAll():log.disableAll();let dappStorageKey=this.handleDappStorageKey(useLocalStorage),torusIframeUrl=new URL(torusUrl);torusIframeUrl.pathname.endsWith("/")?torusIframeUrl.pathname+="frame":torusIframeUrl.pathname+="/frame";let hashParams=new URLSearchParams;dappStorageKey&&hashParams.append("dappStorageKey",dappStorageKey),hashParams.append("origin",window.location.origin),torusIframeUrl.hash=hashParams.toString(),this.torusIframe=htmlToElement(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${torusIframeUrl.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=htmlToElement(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=htmlToElement(`<link href="${torusUrl}/css/widget.css" rel="stylesheet" type="text/css">`);let handleSetup=async()=>new Promise((resolve,reject)=>{try{window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer),this.torusIframe.addEventListener("load",async()=>{let dappMetadata=await getSiteMetadata();this.torusIframe.contentWindow.postMessage({buttonPosition,apiKey,network,dappMetadata,extraParams,whiteLabel},torusIframeUrl.origin),await this._setupWeb3({torusUrl}),showTorusButton&&this.showTorusButton(),null!=whiteLabel&&whiteLabel.topupHide?this.isTopupHidden=whiteLabel.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,resolve()})}catch(error){reject(error)}});await documentReady(),await handleSetup()}async login(){let params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInitialized)throw Error("Call init() first");try{this.requestedLoginProvider=params.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});let res=await new Promise((resolve,reject)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,params.login_hint]},(0,openloginJrpc_esm.nE)(resolve,reject))});if(Array.isArray(res)&&res.length>0)return res;throw Error("Login failed")}catch(error){throw log.error("login failed",error),error}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(loginParams){if(!this.isInitialized)throw Error("Call init() first");let{privateKey,userInfo}=loginParams,{success}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey,userInfo}});if(!success)throw Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw Error("Not logged in");await this.communicationProvider.request({method:baseControllers_esm.vU.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function isElement(element){return element instanceof Element||element instanceof Document}isElement(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),isElement(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),isElement(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(params){await this.communicationProvider.request({method:baseControllers_esm.vU.SET_PROVIDER,params:_objectSpread({},params)})}async showWallet(path){let params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},instanceId=await this.communicationProvider.request({method:baseControllers_esm.vU.WALLET_INSTANCE_ID,params:[]}),finalPath=path?`/${path}`:"",finalUrl=new URL(`${this.torusUrl}/wallet${finalPath}`);finalUrl.searchParams.append("instanceId",instanceId),Object.keys(params).forEach(x=>{finalUrl.searchParams.append(x,params[x])}),this.dappStorageKey&&(finalUrl.hash=`#dappStorageKey=${this.dappStorageKey}`);let walletWindow=new PopupHandler({url:finalUrl,features:getPopupFeatures(FEATURES_DEFAULT_WALLET_WINDOW)});walletWindow.open()}async getUserInfo(){let userInfoResponse=await this.communicationProvider.request({method:baseControllers_esm.vU.USER_INFO,params:[]});return userInfoResponse}async initiateTopup(provider,params){if(!this.isInitialized)throw Error("Torus is not initialized");let windowId=getWindowId();this.communicationProvider._handleWindow(windowId);let topupResponse=await this.communicationProvider.request({method:baseControllers_esm.vU.TOPUP,params:{provider,params,windowId}});return topupResponse}async getAccounts(){let response=await this.provider.request({method:"getAccounts",params:[]});return response}async sendTransaction(transaction){let response=await this.provider.request({method:"send_transaction",params:{message:transaction.serialize({requireAllSignatures:!1}).toString("hex")}});return response}async signAndSendTransaction(transaction,options){let response=await this.provider.request({method:"send_transaction",params:{message:transaction.serialize({requireAllSignatures:!1}).toString("hex"),options}});return{signature:response}}async signTransaction(transaction){let response=await this.provider.request({method:"sign_transaction",params:{message:transaction.serializeMessage().toString("hex"),messageOnly:!0}}),parsed=JSON.parse(response),signature={publicKey:new index_browser_esm.nh(parsed.publicKey),signature:Buffer.from(parsed.signature,"hex")};return transaction.addSignature(signature.publicKey,signature.signature),transaction}async signAllTransactions(transactions){let encodedMessage=transactions.map(tx=>tx.serializeMessage().toString("hex")),responses=await this.provider.request({method:"sign_all_transactions",params:{message:encodedMessage,messageOnly:!0}}),signatures=responses.map(item=>{let parsed=JSON.parse(item);return{publicKey:new index_browser_esm.nh(parsed.publicKey),signature:Buffer.from(parsed.signature,"hex")}});return transactions.forEach((tx,idx)=>(tx.addSignature(signatures[idx].publicKey,signatures[idx].signature),tx)),transactions}async signMessage(data){let response=await this.provider.request({method:"sign_message",params:{data}});return response}async getGaslessPublicKey(){let response=await this.provider.request({method:"get_gasless_public_key",params:[]});return response}handleDappStorageKey(useLocalStorage){let dappStorageKey="";if(isLocalStorageAvailable&&useLocalStorage){let storedKey=window.localStorage.getItem(configuration.localStorageKey);if(storedKey)dappStorageKey=storedKey;else{let generatedKey=`torus-app-${getWindowId()}`;window.localStorage.setItem(configuration.localStorageKey,generatedKey),dappStorageKey=generatedKey}}return this.dappStorageKey=dappStorageKey,dappStorageKey}async _setupWeb3(providerParams){log.info("setupWeb3 running");let providerStream=new openloginJrpc_esm.XR({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),communicationStream=new openloginJrpc_esm.XR({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),inPageProvider=new TorusInPageProvider(providerStream,{}),communicationProvider=new TorusCommunicationProvider(communicationStream,{});inPageProvider.tryWindowHandle=(payload,cb)=>{let _payload=payload;if(!Array.isArray(_payload)&&PROVIDER_UNSAFE_METHODS.includes(_payload.method)){if(!this.communicationProvider.isLoggedIn)throw Error("User Not Logged In");let windowId=getWindowId();communicationProvider._handleWindow(windowId,{target:"_blank",features:getPopupFeatures(FEATURES_CONFIRM_WINDOW)}),_payload.windowId=windowId}inPageProvider._rpcEngine.handle(_payload,cb)},communicationProvider.tryWindowHandle=(payload,cb)=>{let _payload=payload;if(!Array.isArray(_payload)&&COMMUNICATION_UNSAFE_METHODS.includes(_payload.method)){let windowId=getWindowId();communicationProvider._handleWindow(windowId,{target:"_blank",features:getPopupFeatures(FEATURES_PROVIDER_CHANGE_WINDOW)}),_payload.params.windowId=windowId}communicationProvider._rpcEngine.handle(_payload,cb)};let detectAccountRequestPrototypeModifier=m=>{let originalMethod=inPageProvider[m],self1=this;inPageProvider[m]=function(request,cb){let{method,params=[]}=request;if("solana_requestAccounts"===method){if(!cb)return self1.login({loginProvider:params[0]});self1.login({loginProvider:params[0]}).then(res=>cb(null,res)).catch(err=>cb(err))}return originalMethod.apply(this,[request,cb])}};detectAccountRequestPrototypeModifier("request"),detectAccountRequestPrototypeModifier("sendAsync"),detectAccountRequestPrototypeModifier("send");let proxiedInPageProvider=new Proxy(inPageProvider,{deleteProperty:()=>!0}),proxiedCommunicationProvider=new Proxy(communicationProvider,{deleteProperty:()=>!0});this.provider=proxiedInPageProvider,this.communicationProvider=proxiedCommunicationProvider,await Promise.all([inPageProvider._initializeState(),communicationProvider._initializeState(_objectSpread(_objectSpread({},providerParams),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),log.debug("Torus - injected provider")}}var custom_error=__webpack_require__(13631),jwt_decode_esm=__webpack_require__(96245),CHAIN_NAMESPACES={EIP155:"eip155",SOLANA:"solana",OTHER:"other"},ADAPTER_NAMESPACES={EIP155:"eip155",SOLANA:"solana",MULTICHAIN:"multichain"},getDefaultNetworkId=function(chainNamespace){if(chainNamespace===CHAIN_NAMESPACES.EIP155||chainNamespace===CHAIN_NAMESPACES.SOLANA)return 1;throw Error("Chain namespace ".concat(chainNamespace," is not supported"))},getEvmChainConfig=function(chainId){var chainNamespace=CHAIN_NAMESPACES.EIP155;return 1===chainId?{chainNamespace:chainNamespace,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===chainId?{chainNamespace:chainNamespace,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===chainId?{chainNamespace:chainNamespace,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===chainId?{chainNamespace:chainNamespace,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===chainId?{chainNamespace:chainNamespace,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===chainId?{chainNamespace:chainNamespace,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon"}:56===chainId?{chainNamespace:chainNamespace,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:97===chainId?{chainNamespace:chainNamespace,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:25===chainId?{chainNamespace:chainNamespace,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===chainId?{chainNamespace:chainNamespace,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:8217===chainId?{chainNamespace:chainNamespace,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn"}:null},getSolanaChainConfig=function(chainId){var chainNamespace=CHAIN_NAMESPACES.SOLANA;return 1===chainId?{chainNamespace:chainNamespace,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}:2===chainId?{chainNamespace:chainNamespace,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana"}:3===chainId?{chainNamespace:chainNamespace,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana"}:null},getChainConfig=function(chainNamespace,chainId){if(chainNamespace===CHAIN_NAMESPACES.OTHER)return null;var finalChainId=chainId?"number"==typeof chainId?chainId:parseInt(chainId,16):getDefaultNetworkId(chainNamespace);return chainNamespace===CHAIN_NAMESPACES.EIP155?getEvmChainConfig(finalChainId):chainNamespace===CHAIN_NAMESPACES.SOLANA?getSolanaChainConfig(finalChainId):null};function _createSuper$1(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var result,Super=(0,getPrototypeOf.Z)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)}}var Web3AuthError=function(_CustomError){(0,inherits.Z)(Web3AuthError,_CustomError);var _super=_createSuper$1(Web3AuthError);function Web3AuthError(code,message){var _this;return(0,classCallCheck.Z)(this,Web3AuthError),_this=_super.call(this,message),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"code",void 0),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"message",void 0),_this.code=code,_this.message=message||"",Object.defineProperty((0,assertThisInitialized.Z)(_this),"name",{value:"Web3AuthError"}),_this}return(0,createClass.Z)(Web3AuthError,[{key:"toJSON",value:function(){return{name:this.name,code:this.code,message:this.message}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),Web3AuthError}(custom_error.s),WalletInitializationError=function(_Web3AuthError){(0,inherits.Z)(WalletInitializationError,_Web3AuthError);var _super2=_createSuper$1(WalletInitializationError);function WalletInitializationError(code,message){var _this2;return(0,classCallCheck.Z)(this,WalletInitializationError),_this2=_super2.call(this,code,message),Object.defineProperty((0,assertThisInitialized.Z)(_this2),"name",{value:"WalletInitializationError"}),_this2}return(0,createClass.Z)(WalletInitializationError,null,[{key:"fromCode",value:function(code){var extraMessage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new WalletInitializationError(code,"".concat(WalletInitializationError.messages[code],", ").concat(extraMessage))}},{key:"notFound",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5001,extraMessage)}},{key:"notInstalled",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5002,extraMessage)}},{key:"notReady",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5003,extraMessage)}},{key:"windowBlocked",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5004,extraMessage)}},{key:"windowClosed",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5005,extraMessage)}},{key:"incompatibleChainNameSpace",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5006,extraMessage)}},{key:"duplicateAdapterError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5007,extraMessage)}},{key:"invalidProviderConfigError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5008,extraMessage)}},{key:"providerNotReadyError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5009,extraMessage)}},{key:"rpcConnectionError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5010,extraMessage)}},{key:"invalidParams",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5011,extraMessage)}},{key:"invalidNetwork",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletInitializationError.fromCode(5013,extraMessage)}}]),WalletInitializationError}(Web3AuthError);(0,defineProperty.Z)(WalletInitializationError,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});var WalletLoginError=function(_Web3AuthError2){(0,inherits.Z)(WalletLoginError,_Web3AuthError2);var _super3=_createSuper$1(WalletLoginError);function WalletLoginError(code,message){var _this3;return(0,classCallCheck.Z)(this,WalletLoginError),_this3=_super3.call(this,code,message),Object.defineProperty((0,assertThisInitialized.Z)(_this3),"name",{value:"WalletLoginError"}),_this3}return(0,createClass.Z)(WalletLoginError,null,[{key:"fromCode",value:function(code){var extraMessage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new WalletLoginError(code,"".concat(WalletLoginError.messages[code]).concat(extraMessage))}},{key:"connectionError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletLoginError.fromCode(5111,extraMessage)}},{key:"disconnectionError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletLoginError.fromCode(5112,extraMessage)}},{key:"notConnectedError",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletLoginError.fromCode(5113,extraMessage)}},{key:"popupClosed",value:function(){var extraMessage=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return WalletLoginError.fromCode(5114,extraMessage)}}]),WalletLoginError}(Web3AuthError);function base_esm_ownKeys$1(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function base_esm_objectSpread$1(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?base_esm_ownKeys$1(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):base_esm_ownKeys$1(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}(0,defineProperty.Z)(WalletLoginError,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});var MULTI_CHAIN_ADAPTERS={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},SOLANA_ADAPTERS=base_esm_objectSpread$1({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLLET:"sollet",SOLLET_EXTENSION:"sollet-extension",SOLFLARE:"solflare",SLOPE:"slope"},MULTI_CHAIN_ADAPTERS),EVM_ADAPTERS=base_esm_objectSpread$1({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},MULTI_CHAIN_ADAPTERS),WALLET_ADAPTERS=base_esm_objectSpread$1(base_esm_objectSpread$1({},EVM_ADAPTERS),SOLANA_ADAPTERS);function base_esm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function base_esm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?base_esm_ownKeys(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):base_esm_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}var ADAPTER_CATEGORY={EXTERNAL:"external",IN_APP:"in_app"},ADAPTER_STATUS={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},ADAPTER_EVENTS=base_esm_objectSpread(base_esm_objectSpread({},ADAPTER_STATUS),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"}),BaseAdapter=function(_SafeEventEmitter){(0,inherits.Z)(BaseAdapter,_SafeEventEmitter);var hasNativeReflectConstruct,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(BaseAdapter);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function BaseAdapter(){var _this;(0,classCallCheck.Z)(this,BaseAdapter);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"adapterData",{}),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"sessionTime",86400),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"chainConfig",null),_this}return(0,createClass.Z)(BaseAdapter,[{key:"chainConfigProxy",get:function(){return this.chainConfig?base_esm_objectSpread({},this.chainConfig):null}},{key:"setChainConfig",value:function(customChainConfig){if(this.status!==ADAPTER_STATUS.READY){if(!customChainConfig.chainNamespace)throw WalletInitializationError.notReady("ChainNamespace is required while setting chainConfig");var defaultChainConfig=getChainConfig(customChainConfig.chainNamespace,customChainConfig.chainId);this.chainConfig=base_esm_objectSpread(base_esm_objectSpread({},defaultChainConfig),customChainConfig)}}},{key:"setAdapterSettings",value:function(_){}},{key:"checkConnectionRequirements",value:function(){if(this.name!==WALLET_ADAPTERS.WALLET_CONNECT_V1||this.status!==ADAPTER_STATUS.CONNECTING){if(this.status===ADAPTER_STATUS.CONNECTING)throw WalletInitializationError.notReady("Already connecting");if(this.status===ADAPTER_STATUS.CONNECTED)throw WalletLoginError.connectionError("Already connected");if(this.status!==ADAPTER_STATUS.READY)throw WalletLoginError.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function");if(!this.clientId)throw WalletLoginError.connectionError("Please initialize Web3Auth with a valid clientId in constructor")}}},{key:"checkInitializationRequirements",value:function(){if(this.status!==ADAPTER_STATUS.NOT_READY){if(this.status===ADAPTER_STATUS.CONNECTED)throw WalletInitializationError.notReady("Already connected");if(this.status===ADAPTER_STATUS.READY)throw WalletInitializationError.notReady("Adapter is already initialized")}}},{key:"updateAdapterData",value:function(data){this.adapterData=data,this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:data})}}]),BaseAdapter}(openloginJrpc_esm.Ue),authServer="https://authjs.web3auth.io",base_esm_log=loglevel_default().getLogger("web3auth-logger");function base_esm_storageAvailable(type){var storage,storageExists=!1,storageLength=0;try{storage=window[type],storageExists=!0,storageLength=storage.length;var x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),!0}catch(error){return!!(error&&(22===error.code||1014===error.code||"QuotaExceededError"===error.name||"NS_ERROR_DOM_QUOTA_REACHED"===error.name)&&storageExists&&0!==storageLength)}}var isHexStrict=function(hex){return("string"==typeof hex||"number"==typeof hex)&&/^(-)?0x[0-9a-f]*$/i.test(hex)},checkIfTokenIsExpired=function(token){var decoded=(0,jwt_decode_esm.Z)(token);return!!(!decoded.exp||decoded.exp<Math.floor(Date.now()/1e3))},signChallenge=(_ref=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(payload,chainNamespace){var data,res;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return data={payload:payload,header:{t:"solana"===chainNamespace?"sip99":"eip191"},network:"solana"===chainNamespace?"solana":"ethereum"},_context.next=6,(0,httpHelpers_esm.v_)("".concat(authServer,"/siww/get"),data);case 6:if((res=_context.sent).success){_context.next=9;break}throw Error("Failed to authenticate user, Please reach out to Web3Auth Support team");case 9:return _context.abrupt("return",res.challenge);case 10:case"end":return _context.stop()}},_callee)})),function(_x,_x2){return _ref.apply(this,arguments)}),verifySignedChallenge=(_ref2=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(chainNamespace,signedMessage,challenge,issuer,sessionTime,clientId){var sigData,idTokenRes;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return sigData={signature:{s:signedMessage,t:"solana"===chainNamespace?"sip99":"eip191"},message:challenge,issuer:issuer,audience:window.location.hostname,timeout:sessionTime},_context2.next=4,(0,httpHelpers_esm.v_)("".concat(authServer,"/siww/verify"),sigData,{headers:{client_id:clientId,wallet_provider:issuer}});case 4:if((idTokenRes=_context2.sent).success){_context2.next=8;break}throw base_esm_log.error("Failed to authenticate user, ,message verification failed",idTokenRes.error),Error("Failed to authenticate user, ,message verification failed");case 8:return _context2.abrupt("return",idTokenRes.token);case 9:case"end":return _context2.stop()}},_callee2)})),function(_x3,_x4,_x5,_x6,_x7,_x8){return _ref2.apply(this,arguments)}),node_modules_bs58=__webpack_require__(72319),bs58_default=__webpack_require__.n(node_modules_bs58),BaseSolanaAdapter=function(_BaseAdapter){(0,inherits.Z)(BaseSolanaAdapter,_BaseAdapter);var hasNativeReflectConstruct,_authenticateUser,_disconnect,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(BaseSolanaAdapter);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function BaseSolanaAdapter(){var _this,params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,classCallCheck.Z)(this,BaseSolanaAdapter),_this=_super.call(this),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"clientId",void 0),_this.clientId=params.clientId,_this}return(0,createClass.Z)(BaseSolanaAdapter,[{key:"authenticateUser",value:(_authenticateUser=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(){var _this$chainConfig,_this$chainConfig2,chainNamespace,chainId,accounts,existingToken,payload,challenge,encodedMessage,signedMessage,idToken;return regenerator_default().wrap(function(_context){for(var userAddress,issuer,userAddress1,issuer1;;)switch(_context.prev=_context.next){case 0:if(!(!this.provider||!(null!==(_this$chainConfig=this.chainConfig)&&void 0!==_this$chainConfig&&_this$chainConfig.chainId))){_context.next=2;break}throw WalletLoginError.notConnectedError();case 2:if(chainNamespace=(_this$chainConfig2=this.chainConfig).chainNamespace,chainId=_this$chainConfig2.chainId,!(this.status!==ADAPTER_STATUS.CONNECTED)){_context.next=5;break}throw WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first");case 5:return _context.next=7,this.provider.request({method:"getAccounts"});case 7:if(!((accounts=_context.sent)&&accounts.length>0)){_context.next=27;break}if(userAddress=accounts[0],issuer=this.name,!(existingToken=base_esm_storageAvailable("localStorage")?localStorage.getItem("".concat(userAddress.toLowerCase(),"_").concat(issuer)):null)||checkIfTokenIsExpired(existingToken)){_context.next=14;break}return _context.abrupt("return",{idToken:existingToken});case 14:return payload={domain:window.location.origin,uri:window.location.href,address:accounts[0],chainId:parseInt(chainId,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},_context.next=17,signChallenge(payload,chainNamespace);case 17:return challenge=_context.sent,encodedMessage=new TextEncoder().encode(challenge),_context.next=21,this.provider.request({method:"signMessage",params:{message:encodedMessage,display:"utf8"}});case 21:return signedMessage=_context.sent,_context.next=24,verifySignedChallenge(chainNamespace,bs58_default().encode(signedMessage),challenge,this.name,this.sessionTime,this.clientId);case 24:return idToken=_context.sent,userAddress1=accounts[0],issuer1=this.name,base_esm_storageAvailable("localStorage")&&localStorage.setItem("".concat(userAddress1.toLowerCase(),"_").concat(issuer1),idToken),_context.abrupt("return",{idToken:idToken});case 27:throw WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first");case 28:case"end":return _context.stop()}},_callee,this)})),function(){return _authenticateUser.apply(this,arguments)})},{key:"disconnect",value:(_disconnect=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(){var accounts;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(this.status!==ADAPTER_STATUS.CONNECTED)){_context2.next=2;break}throw WalletLoginError.disconnectionError("Not connected with wallet");case 2:return _context2.next=4,this.provider.request({method:"getAccounts"});case 4:if((accounts=_context2.sent)&&accounts.length>0){var userAddress,issuer;userAddress=accounts[0],issuer=this.name,base_esm_storageAvailable("localStorage")&&localStorage.removeItem("".concat(userAddress.toLowerCase(),"_").concat(issuer))}case 6:case"end":return _context2.stop()}},_callee2,this)})),function(){return _disconnect.apply(this,arguments)})}]),BaseSolanaAdapter}(BaseAdapter),json_rpc_random_id=__webpack_require__(23420),json_rpc_random_id_default=__webpack_require__.n(json_rpc_random_id);function baseProvider_esm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function baseProvider_esm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?baseProvider_esm_ownKeys(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):baseProvider_esm_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}var baseProvider_esm_BaseProvider=function(_BaseController){(0,inherits.Z)(BaseProvider,_BaseController);var hasNativeReflectConstruct,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(BaseProvider);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function BaseProvider(_ref){var _thisSuper,_this,config=_ref.config,state=_ref.state;if((0,classCallCheck.Z)(this,BaseProvider),_this=_super.call(this,{config:config,state:state}),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"_providerEngineProxy",null),!config.chainConfig)throw WalletInitializationError.invalidProviderConfigError("Please provide chainConfig");if(!config.chainConfig.chainId)throw WalletInitializationError.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!config.chainConfig.rpcTarget)throw WalletInitializationError.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");return _this.defaultState={chainId:"loading"},_this.defaultConfig={chainConfig:config.chainConfig,networks:(0,defineProperty.Z)({},config.chainConfig.chainId,config.chainConfig)},(0,get.Z)((_thisSuper=(0,assertThisInitialized.Z)(_this),(0,getPrototypeOf.Z)(BaseProvider.prototype)),"initialize",_thisSuper).call(_thisSuper),_this}return(0,createClass.Z)(BaseProvider,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(_){throw Error("Method not implemented.")}},{key:"addChain",value:function(chainConfig){if(!chainConfig.chainId||!chainConfig.rpcTarget)throw dist.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:baseProvider_esm_objectSpread(baseProvider_esm_objectSpread({},this.config.networks),{},(0,defineProperty.Z)({},chainConfig.chainId,chainConfig))})}},{key:"getChainConfig",value:function(chainId){var _this$config$networks,chainConfig=null===(_this$config$networks=this.config.networks)||void 0===_this$config$networks?void 0:_this$config$networks[chainId];if(!chainConfig)throw dist.ethErrors.rpc.invalidRequest("Chain ".concat(chainId," is not supported, please add chainConfig for it"));return chainConfig}},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(providerEngineProxy){this._providerEngineProxy?this._providerEngineProxy.setTarget(providerEngineProxy):this._providerEngineProxy=(0,baseControllers_esm.qY)(providerEngineProxy)}}]),BaseProvider}(baseControllers_esm.xG),CommonPrivateKeyProvider=function(){var _setupProvider,_switchChain;function CommonPrivateKeyProvider(){(0,classCallCheck.Z)(this,CommonPrivateKeyProvider),(0,defineProperty.Z)(this,"_providerEngineProxy",null)}return(0,createClass.Z)(CommonPrivateKeyProvider,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(_){throw Error("Method not implemented.")}},{key:"addChain",value:function(_){throw Error("Method not implemented.")}},{key:"setupProvider",value:(_setupProvider=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(privKey){var privKeyMiddleware,engine,provider;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:privKeyMiddleware=this.getPrivKeyMiddleware(privKey),(engine=new openloginJrpc_esm.eI).push(privKeyMiddleware),provider=(0,baseControllers_esm.Xj)(engine),this.updateProviderEngineProxy(provider);case 5:case"end":return _context.stop()}},_callee,this)})),function(_x){return _setupProvider.apply(this,arguments)})},{key:"switchChain",value:(_switchChain=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(_){return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",Promise.resolve());case 1:case"end":return _context2.stop()}},_callee2)})),function(_x2){return _switchChain.apply(this,arguments)})},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(providerEngineProxy){this._providerEngineProxy?this._providerEngineProxy.setTarget(providerEngineProxy):this._providerEngineProxy=(0,baseControllers_esm.qY)(providerEngineProxy)}},{key:"getPrivKeyMiddleware",value:function(privKey){var _getPrivatekey,middleware={getPrivatekey:(_getPrivatekey=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(){return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",privKey);case 1:case"end":return _context3.stop()}},_callee3)})),function(){return _getPrivatekey.apply(this,arguments)})};return this.createPrivKeyMiddleware(middleware)}},{key:"createPrivKeyMiddleware",value:function(_ref){var getPrivatekey=_ref.getPrivatekey;function _getPrivatekeyHandler(){return(_getPrivatekeyHandler=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee4(_,res){return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,getPrivatekey();case 2:res.result=_context4.sent;case 3:case"end":return _context4.stop()}},_callee4)}))).apply(this,arguments)}return(0,openloginJrpc_esm.v0)({private_key:(0,openloginJrpc_esm.Pk)(function(_x3,_x4){return _getPrivatekeyHandler.apply(this,arguments)})})}}]),CommonPrivateKeyProvider}();(0,defineProperty.Z)(CommonPrivateKeyProvider,"getProviderInstance",(_ref21=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee5(params){var providerFactory;return regenerator_default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return providerFactory=new CommonPrivateKeyProvider,_context5.next=3,providerFactory.setupProvider(params.privKey);case 3:return _context5.abrupt("return",providerFactory);case 4:case"end":return _context5.stop()}},_callee5)})),function(_x5){return _ref21.apply(this,arguments)})),json_rpc_random_id_default()();var node_modules_bs58_0=__webpack_require__(77191),node_modules_bs58_default=__webpack_require__.n(node_modules_bs58_0),nacl_fast=__webpack_require__(50108),nacl_fast_default=__webpack_require__.n(nacl_fast),solanaProvider_esm_Buffer=__webpack_require__(48764).Buffer;function createGenericJRPCMiddleware(targetMethod,handler){var _ref5;return(0,openloginJrpc_esm.Pk)((_ref5=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(request,response,next){var result;return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!(request.method!==targetMethod)){_context3.next=3;break}return _context3.abrupt("return",next());case 3:if(handler){_context3.next=5;break}throw Error("WalletMiddleware - ".concat(targetMethod," not provided"));case 5:return _context3.next=7,handler(request);case 7:return result=_context3.sent,response.result=result,_context3.abrupt("return",void 0);case 10:case"end":return _context3.stop()}},_callee3)})),function(_x7,_x8,_x9){return _ref5.apply(this,arguments)}))}function createSolanaMiddleware(providerHandlers){var _ref4,_ref2,getAccounts=providerHandlers.getAccounts,requestAccounts=providerHandlers.requestAccounts,signTransaction=providerHandlers.signTransaction,signAndSendTransaction=providerHandlers.signAndSendTransaction,signAllTransactions=providerHandlers.signAllTransactions,signMessage=providerHandlers.signMessage,getPrivateKey=providerHandlers.getPrivateKey,getSecretKey=providerHandlers.getSecretKey;return(0,openloginJrpc_esm.UZ)([(0,openloginJrpc_esm.Pk)((_ref4=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(request,response,next){var accounts;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!("requestAccounts"!==request.method)){_context2.next=3;break}return _context2.abrupt("return",next());case 3:if(requestAccounts){_context2.next=5;break}throw Error("WalletMiddleware - opts.requestAccounts not provided");case 5:return _context2.next=7,requestAccounts(request);case 7:return accounts=_context2.sent,response.result=accounts,_context2.abrupt("return",void 0);case 10:case"end":return _context2.stop()}},_callee2)})),function(_x4,_x5,_x6){return _ref4.apply(this,arguments)})),(0,openloginJrpc_esm.Pk)((_ref2=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(request,response,next){var accounts;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!("getAccounts"!==request.method)){_context.next=3;break}return _context.abrupt("return",next());case 3:if(getAccounts){_context.next=5;break}throw Error("WalletMiddleware - opts.getAccounts not provided");case 5:return _context.next=7,getAccounts(request);case 7:return accounts=_context.sent,response.result=accounts,_context.abrupt("return",void 0);case 10:case"end":return _context.stop()}},_callee)})),function(_x,_x2,_x3){return _ref2.apply(this,arguments)})),createGenericJRPCMiddleware("signTransaction",signTransaction),createGenericJRPCMiddleware("signAndSendTransaction",signAndSendTransaction),createGenericJRPCMiddleware("signAllTransactions",signAllTransactions),createGenericJRPCMiddleware("signMessage",signMessage),createGenericJRPCMiddleware("solanaPrivateKey",getPrivateKey),createGenericJRPCMiddleware("solanaSecretKey",getSecretKey)])}function solanaProvider_esm_ownKeys$2(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}var getTorusHandlers=function(injectedProvider){var _requestAccounts,_getAccounts,_getPrivateKey,_getSecretKey,_signMessage,_signTransaction,_signAndSendTransaction,_signAllTransactions;return{requestAccounts:(_requestAccounts=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(){var accounts;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,injectedProvider.request({method:"solana_requestAccounts",params:{}});case 2:return accounts=_context.sent,_context.abrupt("return",accounts);case 4:case"end":return _context.stop()}},_callee)})),function(){return _requestAccounts.apply(this,arguments)}),getAccounts:(_getAccounts=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(){var accounts;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,injectedProvider.request({method:"solana_requestAccounts",params:{}});case 2:return accounts=_context2.sent,_context2.abrupt("return",accounts);case 4:case"end":return _context2.stop()}},_callee2)})),function(){return _getAccounts.apply(this,arguments)}),getPrivateKey:(_getPrivateKey=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(){return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:throw dist.ethErrors.rpc.methodNotSupported();case 1:case"end":return _context3.stop()}},_callee3)})),function(){return _getPrivateKey.apply(this,arguments)}),getSecretKey:(_getSecretKey=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee4(){return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:throw dist.ethErrors.rpc.methodNotSupported();case 1:case"end":return _context4.stop()}},_callee4)})),function(){return _getSecretKey.apply(this,arguments)}),signMessage:(_signMessage=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee5(req){var _req$params,message;return regenerator_default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(null!==(_req$params=req.params)&&void 0!==_req$params&&_req$params.message){_context5.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:return _context5.next=4,injectedProvider.signMessage(req.params.message);case 4:return message=_context5.sent,_context5.abrupt("return",message);case 6:case"end":return _context5.stop()}},_callee5)})),function(_x){return _signMessage.apply(this,arguments)}),signTransaction:(_signTransaction=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee6(req){var _req$params2,txMessage,response;return regenerator_default().wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(null!==(_req$params2=req.params)&&void 0!==_req$params2&&_req$params2.message){_context6.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:return txMessage=req.params.message,_context6.next=5,injectedProvider.signTransaction(txMessage);case 5:return response=_context6.sent,_context6.abrupt("return",response);case 7:case"end":return _context6.stop()}},_callee6)})),function(_x2){return _signTransaction.apply(this,arguments)}),signAndSendTransaction:(_signAndSendTransaction=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee7(req){var _req$params3,txMessage,response;return regenerator_default().wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(null!==(_req$params3=req.params)&&void 0!==_req$params3&&_req$params3.message){_context7.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:return txMessage=req.params.message,_context7.next=5,injectedProvider.sendTransaction(txMessage);case 5:return response=_context7.sent,_context7.abrupt("return",{signature:response});case 7:case"end":return _context7.stop()}},_callee7)})),function(_x3){return _signAndSendTransaction.apply(this,arguments)}),signAllTransactions:(_signAllTransactions=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee8(req){var _req$params4,_req$params5,transactions,response;return regenerator_default().wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(!(!(null!==(_req$params4=req.params)&&void 0!==_req$params4&&_req$params4.message)||!(null!==(_req$params5=req.params)&&void 0!==_req$params5&&_req$params5.message.length))){_context8.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:return transactions=req.params.message,_context8.next=5,injectedProvider.signAllTransactions(transactions);case 5:return response=_context8.sent,_context8.abrupt("return",response);case 7:case"end":return _context8.stop()}},_callee8)})),function(_x4){return _signAllTransactions.apply(this,arguments)})}};function solanaProvider_esm_ownKeys$1(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function solanaProvider_esm_objectSpread$1(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?solanaProvider_esm_ownKeys$1(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):solanaProvider_esm_ownKeys$1(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}var TorusInjectedProvider=function(_BaseProvider){(0,inherits.Z)(TorusInjectedProvider,_BaseProvider);var hasNativeReflectConstruct,_switchChain,_setupProvider,_lookupNetwork,_setupEngine,_handleInjectedProviderUpdate,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(TorusInjectedProvider);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function TorusInjectedProvider(_ref){var config=_ref.config,state=_ref.state;return(0,classCallCheck.Z)(this,TorusInjectedProvider),_super.call(this,{config:{chainConfig:solanaProvider_esm_objectSpread$1(solanaProvider_esm_objectSpread$1({},config.chainConfig),{},{chainNamespace:CHAIN_NAMESPACES.SOLANA})},state:state})}return(0,createClass.Z)(TorusInjectedProvider,[{key:"switchChain",value:(_switchChain=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(_){return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",Promise.resolve());case 1:case"end":return _context.stop()}},_callee)})),function(_x){return _switchChain.apply(this,arguments)})},{key:"setupProvider",value:(_setupProvider=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(injectedProvider){return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return this.handleInjectedProviderUpdate(injectedProvider),_context2.next=3,this.setupEngine(injectedProvider);case 3:case"end":return _context2.stop()}},_callee2,this)})),function(_x2){return _setupProvider.apply(this,arguments)})},{key:"lookupNetwork",value:(_lookupNetwork=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(){var chainId,connectedChainId,connectedHexChainId;return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(this.provider){_context3.next=2;break}throw dist.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});case 2:return chainId=this.config.chainConfig.chainId,_context3.next=5,this.provider.request({method:"solana_chainId"});case 5:if(!(chainId!==(connectedHexChainId=isHexStrict((connectedChainId=_context3.sent).toString())?connectedChainId:"0x".concat(parseInt(connectedChainId,10).toString(16))))){_context3.next=9;break}throw WalletInitializationError.rpcConnectionError("Invalid network, net_version is: ".concat(connectedHexChainId,", expected: ").concat(chainId));case 9:return this.update({chainId:connectedHexChainId}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),_context3.abrupt("return",this.state.chainId);case 13:case"end":return _context3.stop()}},_callee3,this)})),function(){return _lookupNetwork.apply(this,arguments)})},{key:"setupEngine",value:(_setupEngine=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee4(injectedProvider){var solanaMiddleware,injectedProviderProxy,engine,provider;return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return solanaMiddleware=createSolanaMiddleware(getTorusHandlers(injectedProvider)),injectedProviderProxy=function(provider){var _ref;return(0,openloginJrpc_esm.Pk)((_ref=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(req,res,_next){var result;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,provider.request(function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?solanaProvider_esm_ownKeys$2(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):solanaProvider_esm_ownKeys$2(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}({},req));case 2:result=_context.sent,res.result=result;case 4:case"end":return _context.stop()}},_callee)})),function(_x,_x2,_x3){return _ref.apply(this,arguments)}))}(injectedProvider),(engine=new openloginJrpc_esm.eI).push(solanaMiddleware),engine.push(injectedProviderProxy),provider=(0,baseControllers_esm.Xj)(engine),this.updateProviderEngineProxy(provider),_context4.next=10,this.lookupNetwork();case 10:case"end":return _context4.stop()}},_callee4,this)})),function(_x3){return _setupEngine.apply(this,arguments)})},{key:"handleInjectedProviderUpdate",value:(_handleInjectedProviderUpdate=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee7(injectedProvider){var _this=this;return regenerator_default().wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:injectedProvider.on("accountsChanged",function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee5(accounts){return regenerator_default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:_this.provider.emit("accountsChanged",accounts);case 1:case"end":return _context5.stop()}},_callee5)}));return function(_x5){return _ref2.apply(this,arguments)}}()),injectedProvider.on("chainChanged",function(){var _ref3=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee6(chainId){var connectedHexChainId;return regenerator_default().wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return connectedHexChainId=isHexStrict(chainId)?chainId:"0x".concat(parseInt(chainId,10).toString(16)),_this.configure({chainConfig:solanaProvider_esm_objectSpread$1(solanaProvider_esm_objectSpread$1({},_this.config.chainConfig),{},{chainId:connectedHexChainId})}),_context6.next=4,_this.setupProvider(injectedProvider);case 4:case"end":return _context6.stop()}},_callee6)}));return function(_x6){return _ref3.apply(this,arguments)}}());case 2:case"end":return _context7.stop()}},_callee7)})),function(_x4){return _handleInjectedProviderUpdate.apply(this,arguments)})}]),TorusInjectedProvider}(baseProvider_esm_BaseProvider);function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _getProviderHandlers(){return(_getProviderHandlers=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee9(_ref){var privKey,getProviderEngineProxy,keyPairGenerator,keyPair,providerHandlers;return regenerator_default().wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(privKey=_ref.privKey,getProviderEngineProxy=_ref.getProviderEngineProxy,keyPairGenerator=function(){return index_browser_esm.RG.fromSecretKey(solanaProvider_esm_Buffer.from(privKey,"hex"))},!("string"!=typeof privKey)){_context9.next=4;break}throw WalletInitializationError.invalidParams("privKey must be a string");case 4:return keyPair=keyPairGenerator(),providerHandlers={requestAccounts:function(){var _requestAccounts=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(){return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",[keyPair.publicKey.toBase58()]);case 1:case"end":return _context.stop()}},_callee)}));return function(){return _requestAccounts.apply(this,arguments)}}(),getAccounts:function(){var _getAccounts=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(){return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",[keyPair.publicKey.toBase58()]);case 1:case"end":return _context2.stop()}},_callee2)}));return function(){return _getAccounts.apply(this,arguments)}}(),getPrivateKey:function(){var _getPrivateKey=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(){return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",privKey);case 1:case"end":return _context3.stop()}},_callee3)}));return function(){return _getPrivateKey.apply(this,arguments)}}(),getSecretKey:function(){var _getSecretKey=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee4(){return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",node_modules_bs58_default().encode(keyPair.secretKey));case 1:case"end":return _context4.stop()}},_callee4)}));return function(){return _getSecretKey.apply(this,arguments)}}(),signTransaction:function(){var _signTransaction=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee5(req){var _req$params,transaction;return regenerator_default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(null!==(_req$params=req.params)&&void 0!==_req$params&&_req$params.message){_context5.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:return(transaction=req.params.message).partialSign(keyPair),_context5.abrupt("return",transaction);case 5:case"end":return _context5.stop()}},_callee5)}));return function(_x2){return _signTransaction.apply(this,arguments)}}(),signMessage:function(){var _signMessage=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee6(req){var _req$params2,signedMsg;return regenerator_default().wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(null!==(_req$params2=req.params)&&void 0!==_req$params2&&_req$params2.message){_context6.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:return signedMsg=nacl_fast_default().sign.detached(req.params.message,keyPair.secretKey),_context6.abrupt("return",signedMsg);case 4:case"end":return _context6.stop()}},_callee6)}));return function(_x3){return _signMessage.apply(this,arguments)}}(),signAndSendTransaction:function(){var _signAndSendTransaction=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee7(req){var _req$params3,_providerEngineProxy,transaction,sig;return regenerator_default().wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(null!==(_req$params3=req.params)&&void 0!==_req$params3&&_req$params3.message){_context7.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:if(_providerEngineProxy=getProviderEngineProxy()){_context7.next=5;break}throw dist.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return(transaction=req.params.message).sign(keyPair),_context7.next=9,_providerEngineProxy.request({method:"sendTransaction",params:[node_modules_bs58_default().encode(transaction.serialize())]});case 9:return sig=_context7.sent,_context7.abrupt("return",{signature:sig});case 11:case"end":return _context7.stop()}},_callee7)}));return function(_x4){return _signAndSendTransaction.apply(this,arguments)}}(),signAllTransactions:function(){var _signAllTransactions=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee8(req){var _req$params4,_req$params5,_req$params6,txns,_iterator,_step;return regenerator_default().wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(!(!(null!==(_req$params4=req.params)&&void 0!==_req$params4&&_req$params4.message)||!(null!==(_req$params5=req.params)&&void 0!==_req$params5&&_req$params5.message.length))){_context8.next=2;break}throw dist.ethErrors.rpc.invalidParams("message");case 2:_iterator=function(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}}(o))){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}((txns=null===(_req$params6=req.params)||void 0===_req$params6?void 0:_req$params6.message)||[]);try{for(_iterator.s();!(_step=_iterator.n()).done;)_step.value.partialSign(keyPair)}catch(err){_iterator.e(err)}finally{_iterator.f()}return _context8.abrupt("return",txns);case 6:case"end":return _context8.stop()}},_callee8)}));return function(_x5){return _signAllTransactions.apply(this,arguments)}}()},_context9.abrupt("return",providerHandlers);case 7:case"end":return _context9.stop()}},_callee9)}))).apply(this,arguments)}function solanaProvider_esm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function solanaProvider_esm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?solanaProvider_esm_ownKeys(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):solanaProvider_esm_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}var SolanaPrivateKeyProvider=function(_BaseProvider){(0,inherits.Z)(SolanaPrivateKeyProvider,_BaseProvider);var hasNativeReflectConstruct,_enable,_setupProvider,_updateAccount,_switchChain,_lookupNetwork,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(SolanaPrivateKeyProvider);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function SolanaPrivateKeyProvider(_ref){var config=_ref.config,state=_ref.state;return(0,classCallCheck.Z)(this,SolanaPrivateKeyProvider),_super.call(this,{config:{chainConfig:solanaProvider_esm_objectSpread(solanaProvider_esm_objectSpread({},config.chainConfig),{},{chainNamespace:CHAIN_NAMESPACES.SOLANA})},state:state})}return(0,createClass.Z)(SolanaPrivateKeyProvider,[{key:"enable",value:(_enable=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(){return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(this.state.privateKey){_context.next=2;break}throw dist.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return _context.next=4,this.setupProvider(this.state.privateKey);case 4:return _context.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return _context.stop()}},_callee,this)})),function(){return _enable.apply(this,arguments)})},{key:"setupProvider",value:(_setupProvider=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(privKey){var solanaMiddleware,engine,networkMiddleware,provider;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,function(_x){return _getProviderHandlers.apply(this,arguments)}({privKey:privKey,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)});case 2:return solanaMiddleware=createSolanaMiddleware(_context2.sent),engine=new openloginJrpc_esm.eI,networkMiddleware=function(providerConfig){var rpcTarget=providerConfig.rpcTarget,fetchMiddleware=(0,baseControllers_esm.v$)({rpcTarget:rpcTarget});return{networkMiddleware:(0,openloginJrpc_esm.UZ)([function(providerConfig){var chainId=providerConfig.chainId;return(0,openloginJrpc_esm.UZ)([function(req,res,next,end){return"solana_chainId"===req.method?(res.result=chainId,end()):next()},function(req,res,next,end){return"solana_provider_config"===req.method?(res.result=providerConfig,end()):next()}])}(providerConfig),fetchMiddleware]),fetchMiddleware:fetchMiddleware}}(this.config.chainConfig).networkMiddleware,engine.push(this.getChainSwitchMiddleware()),engine.push(this.getAccountMiddleware()),engine.push(solanaMiddleware),engine.push(networkMiddleware),provider=(0,baseControllers_esm.Xj)(engine),this.updateProviderEngineProxy(provider),_context2.next=14,this.lookupNetwork();case 14:case"end":return _context2.stop()}},_callee2,this)})),function(_x){return _setupProvider.apply(this,arguments)})},{key:"updateAccount",value:(_updateAccount=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(params){return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(this._providerEngineProxy){_context3.next=2;break}throw dist.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return _context3.next=4,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 4:if(!(_context3.sent!==params.privateKey)){_context3.next=14;break}return _context3.next=8,this.setupProvider(params.privateKey);case 8:return _context3.t0=this._providerEngineProxy,_context3.next=11,this._providerEngineProxy.request({method:"requestAccounts"});case 11:_context3.t1=_context3.sent,_context3.t2={accounts:_context3.t1},_context3.t0.emit.call(_context3.t0,"accountsChanged",_context3.t2);case 14:case"end":return _context3.stop()}},_callee3,this)})),function(_x2){return _updateAccount.apply(this,arguments)})},{key:"switchChain",value:(_switchChain=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee4(params){var chainConfig,privKey;return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(this._providerEngineProxy){_context4.next=2;break}throw dist.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return chainConfig=this.getChainConfig(params.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:chainConfig}),_context4.next=7,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 7:return privKey=_context4.sent,_context4.next=10,this.setupProvider(privKey);case 10:case"end":return _context4.stop()}},_callee4,this)})),function(_x3){return _switchChain.apply(this,arguments)})},{key:"lookupNetwork",value:(_lookupNetwork=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee5(){var health,chainConfig;return regenerator_default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(this._providerEngineProxy){_context5.next=2;break}throw dist.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return _context5.next=4,this._providerEngineProxy.request({method:"getHealth",params:[]});case 4:if(health=_context5.sent,chainConfig=this.config.chainConfig,!("ok"!==health)){_context5.next=8;break}throw WalletInitializationError.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(chainConfig.rpcTarget));case 8:return this.update({chainId:chainConfig.chainId}),this.state.chainId!==chainConfig.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),_context5.abrupt("return",this.state.chainId);case 11:case"end":return _context5.stop()}},_callee5,this)})),function(){return _lookupNetwork.apply(this,arguments)})},{key:"getChainSwitchMiddleware",value:function(){var _addNewChainConfig,_switchSolanaChain,_ref6,addNewChainConfig,switchSolanaChain,_this=this;return addNewChainConfig=(_ref6={addNewChainConfig:(_addNewChainConfig=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee6(req){var _req$params,chainId,chainName,rpcUrls,blockExplorerUrls,nativeCurrency;return regenerator_default().wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(req.params){_context6.next=2;break}throw dist.ethErrors.rpc.invalidParams("Missing request params");case 2:if(chainId=(_req$params=req.params).chainId,chainName=_req$params.chainName,rpcUrls=_req$params.rpcUrls,blockExplorerUrls=_req$params.blockExplorerUrls,nativeCurrency=_req$params.nativeCurrency,chainId){_context6.next=5;break}throw dist.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(!(!rpcUrls||0===rpcUrls.length)){_context6.next=7;break}throw dist.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(nativeCurrency){_context6.next=9;break}throw dist.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:_this.addChain({chainNamespace:CHAIN_NAMESPACES.SOLANA,chainId:chainId,ticker:(null==nativeCurrency?void 0:nativeCurrency.symbol)||"SOL",tickerName:(null==nativeCurrency?void 0:nativeCurrency.name)||"Solana",displayName:chainName,rpcTarget:rpcUrls[0],blockExplorer:(null==blockExplorerUrls?void 0:blockExplorerUrls[0])||""});case 10:case"end":return _context6.stop()}},_callee6)})),function(_x4){return _addNewChainConfig.apply(this,arguments)}),switchSolanaChain:(_switchSolanaChain=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee7(req){return regenerator_default().wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(req.params){_context7.next=2;break}throw dist.ethErrors.rpc.invalidParams("Missing request params");case 2:if(req.params.chainId){_context7.next=4;break}throw dist.ethErrors.rpc.invalidParams("Missing chainId");case 4:return _context7.next=6,_this.switchChain(req.params);case 6:case"end":return _context7.stop()}},_callee7)})),function(_x5){return _switchSolanaChain.apply(this,arguments)})}).addNewChainConfig,switchSolanaChain=_ref6.switchSolanaChain,(0,openloginJrpc_esm.UZ)([createGenericJRPCMiddleware("addSolanaChain",addNewChainConfig),createGenericJRPCMiddleware("switchSolanaChain",switchSolanaChain)])}},{key:"getAccountMiddleware",value:function(){var _updatePrivatekey,updatePrivatekey,_this2=this;return updatePrivatekey=({updatePrivatekey:(_updatePrivatekey=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee8(req){var privateKey;return regenerator_default().wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(req.params){_context8.next=2;break}throw dist.ethErrors.rpc.invalidParams("Missing request params");case 2:if(req.params.privateKey){_context8.next=4;break}throw dist.ethErrors.rpc.invalidParams("Missing privateKey");case 4:return privateKey=req.params.privateKey,_context8.next=7,_this2.updateAccount({privateKey:privateKey});case 7:case"end":return _context8.stop()}},_callee8)})),function(_x6){return _updatePrivatekey.apply(this,arguments)})}).updatePrivatekey,(0,openloginJrpc_esm.UZ)([createGenericJRPCMiddleware("updateAccount",updatePrivatekey)])}}]),SolanaPrivateKeyProvider}(baseProvider_esm_BaseProvider);function torusSolanaAdapter_esm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function torusSolanaAdapter_esm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?torusSolanaAdapter_esm_ownKeys(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):torusSolanaAdapter_esm_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}(0,defineProperty.Z)(SolanaPrivateKeyProvider,"getProviderInstance",(_ref22=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee9(params){var providerFactory;return regenerator_default().wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return providerFactory=new SolanaPrivateKeyProvider({config:{chainConfig:params.chainConfig}}),_context9.next=3,providerFactory.setupProvider(params.privKey);case 3:return _context9.abrupt("return",providerFactory);case 4:case"end":return _context9.stop()}},_callee9)})),function(_x7){return _ref22.apply(this,arguments)}));var SolanaWalletAdapter=function(_BaseSolanaAdapter){(0,inherits.Z)(SolanaWalletAdapter,_BaseSolanaAdapter);var hasNativeReflectConstruct,_init,_connect,_disconnect,_getUserInfo,_super=(hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var result,Super=(0,getPrototypeOf.Z)(SolanaWalletAdapter);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)});function SolanaWalletAdapter(params){var _this;return(0,classCallCheck.Z)(this,SolanaWalletAdapter),_this=_super.call(this,params),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"name",WALLET_ADAPTERS.TORUS_SOLANA),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"adapterNamespace",ADAPTER_NAMESPACES.SOLANA),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"currentChainNamespace",CHAIN_NAMESPACES.SOLANA),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"type",ADAPTER_CATEGORY.EXTERNAL),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"status",ADAPTER_STATUS.NOT_READY),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"torusInstance",null),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"torusWalletOptions",void 0),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"initParams",void 0),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"loginSettings",{}),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"solanaProvider",null),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"rehydrated",!1),_this.torusWalletOptions=params.adapterSettings||{},_this.initParams=params.initParams||{},_this.loginSettings=params.loginSettings||{},_this.chainConfig=params.chainConfig||null,_this.sessionTime=params.sessionTime||86400,_this}return(0,createClass.Z)(SolanaWalletAdapter,[{key:"provider",get:function(){if(this.status===ADAPTER_STATUS.CONNECTED&&this.solanaProvider){var _this$solanaProvider;return(null===(_this$solanaProvider=this.solanaProvider)||void 0===_this$solanaProvider?void 0:_this$solanaProvider.provider)||null}return null},set:function(_){throw Error("Not implemented")}},{key:"init",value:(_init=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee(options){var network,_this$chainConfig,blockExplorer,displayName,ticker,tickerName,rpcTarget,_this$chainConfig2,_chainId,_blockExplorer,_displayName,_rpcTarget,_ticker;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return(0,get.Z)((0,getPrototypeOf.Z)(SolanaWalletAdapter.prototype),"checkInitializationRequirements",this).call(this),this.chainConfig?(_chainId=(_this$chainConfig2=this.chainConfig).chainId,_blockExplorer=_this$chainConfig2.blockExplorer,_displayName=_this$chainConfig2.displayName,_rpcTarget=_this$chainConfig2.rpcTarget,_ticker=_this$chainConfig2.ticker,network={chainId:_chainId,rpcTarget:_rpcTarget,blockExplorerUrl:_blockExplorer,displayName:_displayName,tickerName:_this$chainConfig2.tickerName,ticker:_ticker,logo:""}):(this.chainConfig=getChainConfig(CHAIN_NAMESPACES.SOLANA,"0x1"),blockExplorer=(_this$chainConfig=this.chainConfig).blockExplorer,displayName=_this$chainConfig.displayName,ticker=_this$chainConfig.ticker,tickerName=_this$chainConfig.tickerName,rpcTarget=_this$chainConfig.rpcTarget,network={chainId:_this$chainConfig.chainId,rpcTarget:rpcTarget,blockExplorerUrl:blockExplorer,displayName:displayName,ticker:ticker,tickerName:tickerName,logo:""}),this.torusInstance=new Torus(this.torusWalletOptions),base_esm_log.debug("initializing torus solana adapter init"),_context.next=6,this.torusInstance.init(torusSolanaAdapter_esm_objectSpread(torusSolanaAdapter_esm_objectSpread({showTorusButton:!1},this.initParams),{},{network:network}));case 6:if(this.solanaProvider=new TorusInjectedProvider({config:{chainConfig:this.chainConfig}}),this.status=ADAPTER_STATUS.READY,this.emit(ADAPTER_EVENTS.READY,WALLET_ADAPTERS.TORUS_SOLANA),_context.prev=9,base_esm_log.debug("initializing torus solana adapter"),!options.autoConnect){_context.next=15;break}return this.rehydrated=!0,_context.next=15,this.connect();case 15:_context.next=21;break;case 17:_context.prev=17,_context.t0=_context.catch(9),base_esm_log.error("Failed to connect with cached torus solana provider",_context.t0),this.emit(ADAPTER_EVENTS.ERRORED,_context.t0);case 21:case"end":return _context.stop()}},_callee,this,[[9,17]])})),function(_x){return _init.apply(this,arguments)})},{key:"connect",value:(_connect=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee2(){var torusInpageProvider,_this$chainConfig3,chainId,blockExplorer,displayName,rpcTarget,ticker,network;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if((0,get.Z)((0,getPrototypeOf.Z)(SolanaWalletAdapter.prototype),"checkConnectionRequirements",this).call(this),this.torusInstance){_context2.next=3;break}throw WalletInitializationError.notReady("Torus wallet is not initialized");case 3:if(this.solanaProvider){_context2.next=5;break}throw WalletInitializationError.notReady("Torus wallet is not initialized");case 5:return this.status=ADAPTER_STATUS.CONNECTING,this.emit(ADAPTER_EVENTS.CONNECTING,{adapter:WALLET_ADAPTERS.TORUS_SOLANA}),_context2.prev=7,_context2.next=10,this.torusInstance.login(this.loginSettings);case 10:return _context2.prev=10,(torusInpageProvider=this.torusInstance.provider).sendTransaction=this.torusInstance.sendTransaction.bind(this.torusInstance),torusInpageProvider.signAllTransactions=this.torusInstance.signAllTransactions.bind(this.torusInstance),torusInpageProvider.signMessage=this.torusInstance.signMessage.bind(this.torusInstance),torusInpageProvider.signTransaction=this.torusInstance.signTransaction.bind(this.torusInstance),_context2.next=18,this.solanaProvider.setupProvider(torusInpageProvider);case 18:case 27:_context2.next=30;break;case 20:if(_context2.prev=20,_context2.t0=_context2.catch(10),!(_context2.t0 instanceof Web3AuthError&&5010===_context2.t0.code)){_context2.next=29;break}return chainId=(_this$chainConfig3=this.chainConfig).chainId,blockExplorer=_this$chainConfig3.blockExplorer,displayName=_this$chainConfig3.displayName,rpcTarget=_this$chainConfig3.rpcTarget,ticker=_this$chainConfig3.ticker,network={chainId:chainId,rpcTarget:rpcTarget,blockExplorerUrl:blockExplorer,displayName:displayName,tickerName:_this$chainConfig3.tickerName,ticker:ticker,logo:""},_context2.next=27,this.torusInstance.setProvider(network);case 29:throw _context2.t0;case 30:return this.status=ADAPTER_STATUS.CONNECTED,this.torusInstance.showTorusButton(),this.emit(ADAPTER_STATUS.CONNECTED,{adapter:WALLET_ADAPTERS.TORUS_SOLANA,reconnected:this.rehydrated}),_context2.abrupt("return",this.provider);case 36:throw _context2.prev=36,_context2.t1=_context2.catch(7),this.status=ADAPTER_STATUS.READY,this.rehydrated=!1,this.emit(ADAPTER_EVENTS.ERRORED,_context2.t1),WalletLoginError.connectionError("Failed to login with torus solana wallet");case 42:case"end":return _context2.stop()}},_callee2,this,[[7,36],[10,20]])})),function(){return _connect.apply(this,arguments)})},{key:"disconnect",value:(_disconnect=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee3(){var options,_args3=arguments;return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(options=_args3.length>0&&void 0!==_args3[0]?_args3[0]:{cleanup:!1},this.torusInstance){_context3.next=3;break}throw WalletInitializationError.notReady("Torus wallet is not initialized");case 3:return _context3.next=5,(0,get.Z)((0,getPrototypeOf.Z)(SolanaWalletAdapter.prototype),"disconnect",this).call(this);case 5:return _context3.next=7,this.torusInstance.logout();case 7:options.cleanup?(this.status=ADAPTER_STATUS.NOT_READY,this.torusInstance=null,this.solanaProvider=null):this.status=ADAPTER_STATUS.READY,this.emit(ADAPTER_EVENTS.DISCONNECTED);case 9:case"end":return _context3.stop()}},_callee3,this)})),function(){return _disconnect.apply(this,arguments)})},{key:"getUserInfo",value:(_getUserInfo=(0,asyncToGenerator.Z)(regenerator_default().mark(function _callee4(){var userInfo;return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!(this.status!==ADAPTER_STATUS.CONNECTED)){_context4.next=2;break}throw WalletLoginError.notConnectedError("Not connected with wallet");case 2:if(this.torusInstance){_context4.next=4;break}throw WalletInitializationError.notReady("Torus wallet is not initialized");case 4:return _context4.next=6,this.torusInstance.getUserInfo();case 6:return userInfo=_context4.sent,_context4.abrupt("return",userInfo);case 8:case"end":return _context4.stop()}},_callee4,this)})),function(){return _getUserInfo.apply(this,arguments)})},{key:"setAdapterSettings",value:function(options){this.status!==ADAPTER_STATUS.READY&&(null!=options&&options.sessionTime&&(this.sessionTime=options.sessionTime),null!=options&&options.clientId&&(this.clientId=options.clientId))}}]),SolanaWalletAdapter}(BaseSolanaAdapter)},72319:function(module,__unused_webpack_exports,__webpack_require__){let basex=__webpack_require__(28102);module.exports=basex("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},28102:function(module){"use strict";module.exports=function(ALPHABET){if(ALPHABET.length>=255)throw TypeError("Alphabet too long");for(var BASE_MAP=new Uint8Array(256),j=0;j<BASE_MAP.length;j++)BASE_MAP[j]=255;for(var i=0;i<ALPHABET.length;i++){var x=ALPHABET.charAt(i),xc=x.charCodeAt(0);if(255!==BASE_MAP[xc])throw TypeError(x+" is ambiguous");BASE_MAP[xc]=i}var BASE=ALPHABET.length,LEADER=ALPHABET.charAt(0),FACTOR=Math.log(BASE)/Math.log(256),iFACTOR=Math.log(256)/Math.log(BASE);function decodeUnsafe(source){if("string"!=typeof source)throw TypeError("Expected String");if(0===source.length)return new Uint8Array;for(var psz=0,zeroes=0,length=0;source[psz]===LEADER;)zeroes++,psz++;for(var size=(source.length-psz)*FACTOR+1>>>0,b256=new Uint8Array(size);source[psz];){var carry=BASE_MAP[source.charCodeAt(psz)];if(255===carry)return;for(var i=0,it3=size-1;(0!==carry||i<length)&&-1!==it3;it3--,i++)carry+=BASE*b256[it3]>>>0,b256[it3]=carry%256>>>0,carry=carry/256>>>0;if(0!==carry)throw Error("Non-zero carry");length=i,psz++}for(var it4=size-length;it4!==size&&0===b256[it4];)it4++;for(var vch=new Uint8Array(zeroes+(size-it4)),j=zeroes;it4!==size;)vch[j++]=b256[it4++];return vch}return{encode:function(source){if(source instanceof Uint8Array||(ArrayBuffer.isView(source)?source=new Uint8Array(source.buffer,source.byteOffset,source.byteLength):Array.isArray(source)&&(source=Uint8Array.from(source))),!(source instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===source.length)return"";for(var zeroes=0,length=0,pbegin=0,pend=source.length;pbegin!==pend&&0===source[pbegin];)pbegin++,zeroes++;for(var size=(pend-pbegin)*iFACTOR+1>>>0,b58=new Uint8Array(size);pbegin!==pend;){for(var carry=source[pbegin],i=0,it1=size-1;(0!==carry||i<length)&&-1!==it1;it1--,i++)carry+=256*b58[it1]>>>0,b58[it1]=carry%BASE>>>0,carry=carry/BASE>>>0;if(0!==carry)throw Error("Non-zero carry");length=i,pbegin++}for(var it2=size-length;it2!==size&&0===b58[it2];)it2++;for(var str=LEADER.repeat(zeroes);it2<size;++it2)str+=ALPHABET.charAt(b58[it2]);return str},decodeUnsafe:decodeUnsafe,decode:function(string){var buffer=decodeUnsafe(string);if(buffer)return buffer;throw Error("Non-base"+BASE+" character")}}}},64063:function(module){"use strict";module.exports=function equal(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;if(Array.isArray(a)){if((length=a.length)!=b.length)return!1;for(i=length;0!=i--;)if(!equal(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if((length=(keys=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(i=length;0!=i--;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=length;0!=i--;){var length,i,keys,key=keys[i];if(!equal(a[key],b[key]))return!1}return!0}return a!=a&&b!=b}},24970:function(module){"use strict";let isStream=stream=>null!==stream&&"object"==typeof stream&&"function"==typeof stream.pipe;isStream.writable=stream=>isStream(stream)&&!1!==stream.writable&&"function"==typeof stream._write&&"object"==typeof stream._writableState,isStream.readable=stream=>isStream(stream)&&!1!==stream.readable&&"function"==typeof stream._read&&"object"==typeof stream._readableState,isStream.duplex=stream=>isStream.writable(stream)&&isStream.readable(stream),isStream.transform=stream=>isStream.duplex(stream)&&"function"==typeof stream._transform,module.exports=isStream}}]);